# Compose

åœ¨[èŒƒç•´å­¦åŸºç¡€ç†è®º-èŒƒç•´çš„å®šä¹‰](./Light-FP-Categries.md#èŒƒç•´çš„å®šä¹‰)å°èŠ‚å½“ä¸­ï¼Œä»‹ç»äº† **å‡½æ•°çš„ç»„åˆ** å’Œ **å•ä½å‡½æ•°**ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥å®ç°ä¸€ä¸ª `compose` å‡½æ•° å’Œ `id` å‡½æ•°ã€‚

## å®ç° Compose

æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åå°±å« `compose`ã€‚

```js
const compose = function (f, g) {
  return fucntion(x) {
    return f(g(x))
  }
}
```

å…¶ä¸­ï¼Œ`f` å’Œ `g` éƒ½æ˜¯å‡½æ•°,`x` æ˜¯ä¸€ä¸ªé€šè¿‡ â€œç®¡é“â€ ä¼ è¾“çš„å€¼ã€‚ä¸” `g` å°†å…ˆäº `f` æ‰§è¡Œï¼Œä»è€Œåˆ›å»ºäº†ä¸€ä¸ªä»å³åˆ°å·¦çš„æ•°æ®æµ(å¯ä»¥è°‘ç§°â€œå·¦å€¾ä¸»ä¹‰â€)ã€‚

å€¼å¾—æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼š

1. â€œå·¦å€¾â€ å¾ˆé‡è¦

2. ç»„åˆçš„ä¼˜ç‚¹åœ¨äº pointfree çš„æ•°æ®å’Œå¯è¯»æ€§

`pointfree` æŒ‡çš„æ˜¯ï¼šå‡½æ•°æ— é¡»æåŠå°†è¦æ“ä½œçš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„ã€‚æ¯”å¦‚ï¼š

```js
// é pintfree
const shout = x => exclaim()
const exclaim = x => x + '!'
const toUpperCase = x => x.toUpperCase()
```

## å®ç° Id

`id` æ˜¯ä¸€ä¸ªå®ç”¨çš„å‡½æ•°ã€‚å³ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä»€ä¹ˆè¾“å…¥ç„¶ååŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªè¾“å…¥ã€‚å®ç°éå¸¸ç®€å•ï¼š

```js
const id = x => x
```

`id` å‡½æ•°å¯ä»¥ä½œä¸ºç»„åˆæ“ä½œçš„ â€œå•ä½å…ƒâ€ã€‚å³ï¼š

<p style="text-align: center">ğ‘“âˆ˜1<sub>A</sub> = ğ‘“ = 1<sub>B</sub>âˆ˜ğ‘“</p>

è¡¨ç¤ºä¸ºï¼š

```js
compose(id, f) == compose(f, id) = f
```

## Associativity

ç»“åˆç‡(Associativity) æ˜¯èŒƒç•´éœ€è¦æ»¡è¶³çš„æ¡ä»¶ä¹‹ä¸€ï¼Œæ˜¯å»ºç«‹åœ¨ç»„åˆçš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚å³æ»¡è¶³ï¼š

```js
compose(h, compose(g,f)) == compose(compose(h,g), f)
```

## ç®¡é“(Pipeline)

> åœ¨ Unix-like æ“ä½œç³»ç»Ÿä¸­ï¼Œç®¡é“æ˜¯é€šè¿‡æ¶ˆæ¯ä¼ é€’å®ç° inter-process communication çš„ä¸€ç§æœºåˆ¶ã€‚é€šè¿‡ â€œé“¾å¼æ¨¡å‹â€ æ¥ä¸²æ¥ä¸åŒçš„ç¨‹åºæˆ–ä¸åŒçš„ç»„ä»¶ã€‚[Pipeline (Unix)](https://en.wikipedia.org/wiki/Pipeline_(Unix))