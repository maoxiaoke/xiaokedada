<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS中的BFC规则 | XIAOKEDADA</title>
    <meta name="description" content="Write something useful and funny">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/37.styles.420dd482.css" as="style"><link rel="preload" href="/assets/js/app.805bfad6.js" as="script"><link rel="preload" href="/assets/js/35.acab0491.js" as="script"><link rel="preload" href="/assets/js/36.51a74fe2.js" as="script"><link rel="prefetch" href="/assets/js/19.a373ec97.js"><link rel="prefetch" href="/assets/js/1.396d1c97.js"><link rel="prefetch" href="/assets/js/2.5a382350.js"><link rel="prefetch" href="/assets/js/3.8de8e19f.js"><link rel="prefetch" href="/assets/js/4.ec5ff6dd.js"><link rel="prefetch" href="/assets/js/5.f75d7839.js"><link rel="prefetch" href="/assets/js/6.2a8d318a.js"><link rel="prefetch" href="/assets/js/7.a351c781.js"><link rel="prefetch" href="/assets/js/8.f3621ad3.js"><link rel="prefetch" href="/assets/js/9.1bafe1e4.js"><link rel="prefetch" href="/assets/js/10.a249789c.js"><link rel="prefetch" href="/assets/js/11.032cbb9a.js"><link rel="prefetch" href="/assets/js/12.bc286fc5.js"><link rel="prefetch" href="/assets/js/13.9b653c8c.js"><link rel="prefetch" href="/assets/js/14.85db2c9b.js"><link rel="prefetch" href="/assets/js/15.085e9501.js"><link rel="prefetch" href="/assets/js/16.54699c79.js"><link rel="prefetch" href="/assets/js/17.49f03bfb.js"><link rel="prefetch" href="/assets/js/18.e2233fde.js"><link rel="prefetch" href="/assets/js/0.0429d0d5.js"><link rel="prefetch" href="/assets/js/20.e53eead3.js"><link rel="prefetch" href="/assets/js/21.372c7204.js"><link rel="prefetch" href="/assets/js/22.d13a56eb.js"><link rel="prefetch" href="/assets/js/23.ab9d0da4.js"><link rel="prefetch" href="/assets/js/24.d5880845.js"><link rel="prefetch" href="/assets/js/25.c0f12b1f.js"><link rel="prefetch" href="/assets/js/26.c6cb7a6e.js"><link rel="prefetch" href="/assets/js/27.8098f9de.js"><link rel="prefetch" href="/assets/js/28.9998dd8a.js"><link rel="prefetch" href="/assets/js/29.131f3fb3.js"><link rel="prefetch" href="/assets/js/30.dbe36735.js"><link rel="prefetch" href="/assets/js/31.429054e3.js"><link rel="prefetch" href="/assets/js/32.9a071396.js"><link rel="prefetch" href="/assets/js/33.ac324703.js"><link rel="prefetch" href="/assets/js/34.18507f55.js">
    <link rel="stylesheet" href="/assets/css/37.styles.420dd482.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      XIAOKEDADA
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/FirstMeet/" class="nav-link">FirstMeet系列</a></div><div class="nav-item"><a href="/CSS/" class="nav-link router-link-active">CSS</a></div><div class="nav-item"><a href="/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/GatherAll/" class="nav-link">Resource</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/FirstMeet/" class="nav-link">FirstMeet系列</a></div><div class="nav-item"><a href="/CSS/" class="nav-link router-link-active">CSS</a></div><div class="nav-item"><a href="/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/GatherAll/" class="nav-link">Resource</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>层叠样式</span><!----></p><ul class="sidebar-group-items"><li><a href="/CSS/Flex.html" class="sidebar-link">Flexbox的完全教程 [翻译]</a></li><li><a href="/CSS/CSS-ProTips.html" class="sidebar-link">CSS 专家提示[翻译]</a></li><li><a href="/CSS/Layout.html" class="sidebar-link">CSS的布局方式</a></li><li><a href="/CSS/Center.html" class="sidebar-link">CSS居中的完整教程[翻译]</a></li><li><a href="/CSS/BFC.html" class="active sidebar-link">CSS中的BFC规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CSS/BFC.html#bfc-的创建" class="sidebar-link">BFC 的创建</a></li><li class="sidebar-sub-header"><a href="/CSS/BFC.html#bfc-的规则" class="sidebar-link">BFC 的规则</a></li><li class="sidebar-sub-header"><a href="/CSS/BFC.html#bfc-的应用" class="sidebar-link">BFC 的应用</a></li><li class="sidebar-sub-header"><a href="/CSS/BFC.html#防止垂直-margin-重叠" class="sidebar-link">防止垂直 margin 重叠</a></li></ul></li><li><a href="/CSS/Specialty.html" class="sidebar-link">特指度--确定哪个样式胜出</a></li><li><a href="/CSS/Two-or-Three-Column.html" class="sidebar-link">两栏和三栏布局详解</a></li><li><a href="/CSS/Order-CSS-Properties.html" class="sidebar-link">有关 CSS properties 声明顺序的思考</a></li><li><a href="/CSS/CSS2.2.html" class="sidebar-link">CSS 2.2 阅读手册</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="css中的bfc规则"><a href="#css中的bfc规则" aria-hidden="true" class="header-anchor">#</a> CSS中的BFC规则</h1><p>BFC(Block Formatting Context)，中文译成 “块级格式上下文”。标准解释:</p><blockquote><p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with 'overflow' other than 'visible' (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents. -- <a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="noopener noreferrer">w3c<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>首先，我们要理解什么是 <code>block boxes</code>(块盒子)。block boxes 和块级元素是不一致的。</p><blockquote><p>标准中，是这样阐述的。每个 block-level element (块级元素) 产生 block-level box (块级盒)。<strong>block-level boxes</strong> 是参与到 BFC 的盒子。除了 table boxes，block-level box 也是 block container box (块容器盒)，block container box 要么包含 block-level boxes，要么创建 IFC 从而包含 inline-level box。并非所有的 block container boxes 是 block-level boxes。<strong>block-level boxes，同时也是 block containers 的就是 block boxes</strong>。好绕！标准就是这么绕人的。</p></blockquote><p>所以，我们理解: 浮动的、绝对定位的元素和块容器(比如 inline-blocks, table-cells 这些)都<strong>不是</strong> block boxes，block boxes 是那些 <code>overflow</code> 不是 <code>visible</code> 的，两者共同为它们的内容创建了一个 BFC。</p><blockquote><p>Formatting Context 是 W3C CSS2.1 规范中的一个概念它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。最常见的 Formatting context 有 BFC 和 Inline formatting context (简称 IFC)。CSS3 还增加了 GFC 和 FFC。</p></blockquote><h2 id="bfc-的创建"><a href="#bfc-的创建" aria-hidden="true" class="header-anchor">#</a> BFC 的创建</h2><p>不要误认为 BFC 是 block boxes 创建的哦。我们开头标准里的这句话，是有浮动的、绝对定位的元素和块容器、还有 block boxes 共同创建的(也就是 block-level boxes 创建的)。</p><ul><li>根元素</li><li>float 元素(float 不等于 none)</li><li>绝对定位元素 (position 等于 absolute 或者 fixed)</li><li>inline-blocks (display: inline-box)</li><li>table-cell (display: table-cell)</li><li>块级元素，其中 overflow 不等于 visible</li></ul><blockquote><p>来源: <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener noreferrer">Block formatting context<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 。</p></blockquote><hr><h2 id="bfc-的规则"><a href="#bfc-的规则" aria-hidden="true" class="header-anchor">#</a> BFC 的规则</h2><p>查阅标准，可以总结到这么几点:</p><ul><li>内部的 boxes 会在垂直方向上一个一个地叠放</li><li>两个相邻子boxes 之间的垂直距离由 margin 属性确定。同属一个 BFC 的相邻子 boxes 的 margin 会发生 collapse</li><li>每个子 boxes 的 left outer edge (左外侧) 接触 容器块(就是外层容器) 的 left edge (左边缘)。即便存在 float 元素也是如此。除非，子 boxes 建立一个新的 BFC</li><li>BFC 是页面上一个隔离的容器，容器内的子元素不会影响到外面的元素，反之也成立</li><li>计算 BFC 的高度时，浮动元素也参与计算</li></ul><blockquote><p>主要关注 第二条、第三条和第四条</p></blockquote><hr><h2 id="bfc-的应用"><a href="#bfc-的应用" aria-hidden="true" class="header-anchor">#</a> BFC 的应用</h2><h3 id="自适应两栏-三栏布局"><a href="#自适应两栏-三栏布局" aria-hidden="true" class="header-anchor">#</a> 自适应两栏/三栏布局</h3><p>以三栏布局为例:</p><div><p data-height="265" data-theme-id="light" data-slug-hash="KvQgKr" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="KvQgKr" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/KvQgKr/">
      KvQgKr</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><blockquote><p>根据第三条，存在 float 元素，中间的元素仍然接触外容器的左边缘。注意后边那句话，<em>除非建立一个新的 BFC</em>。</p></blockquote><p>如何建立一个新的 BFC，从 BFC 的创建看，可以使用 <code>overflow: hidden</code> 创建一个 block boxes。</p><div><p data-height="265" data-theme-id="light" data-slug-hash="BdYLLx" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="BdYLLx" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/BdYLLx/">
      BdYLLx</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><h3 id="清除内部浮动"><a href="#清除内部浮动" aria-hidden="true" class="header-anchor">#</a> 清除内部浮动</h3><p>这就是以前我常说 <code>overflow:hidden</code> 的怪异之处。</p><div><p data-height="265" data-theme-id="light" data-slug-hash="JypRJR" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="JypRJR" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/JypRJR/">
      JypRJR</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><blockquote><p>子元素使用浮动脱离了文档流，根据最后一条，我们给父元素添加 BFC 来包含 浮动元素的高度。</p></blockquote><div><p data-height="265" data-theme-id="light" data-slug-hash="WEMGEL" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="WEMGEL" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/WEMGEL/">
      WEMGEL</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><h2 id="防止垂直-margin-重叠"><a href="#防止垂直-margin-重叠" aria-hidden="true" class="header-anchor">#</a> 防止垂直 margin 重叠</h2><div><p data-height="265" data-theme-id="light" data-slug-hash="eEVdym" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="eEVdym" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/eEVdym/">
      eEVdym</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><blockquote><p>这是因为 BFC 的 相邻两个 margin 的 collapse 塌陷造成的。(因为根元素会创建一个 BFC)。解决方法，为子元素创建一个新的 BFC，则满足 容器内的子元素不会影响到外面的元素。</p></blockquote><div><p data-height="265" data-theme-id="light" data-slug-hash="vJdXRp" data-default-tab="html,result" data-user="maoxiake" data-embed-version="2" data-pen-title="vJdXRp" class="codepen">See the Pen 
    <a href="https://codepen.io/maoxiake/pen/vJdXRp/">
      vJdXRp</a> by maoxiaoke (<a href="https://codepen.io/maoxiake">@maoxiake</a>) on 
      <a href="https://codepen.io">CodePen</a>.</p></div><p>参考：</p><ul><li><a href="http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html" target="_blank" rel="noopener noreferrer">BFC 神奇背后的原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="noopener noreferrer">Visual formatting model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/maoxiaoke/xiaokedada/edit/master/CSS/BFC.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">5/17/2018, 11:54:25 AM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/CSS/Center.html" class="prev">
          CSS居中的完整教程[翻译]
        </a></span><span class="next"><a href="/CSS/Specialty.html">
          特指度--确定哪个样式胜出
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/35.acab0491.js" defer></script><script src="/assets/js/36.51a74fe2.js" defer></script><script src="/assets/js/app.805bfad6.js" defer></script>
  </body>
</html>
