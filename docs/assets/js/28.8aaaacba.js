(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{188:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),a("p",[t._v("TODO:")]),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),a("p",[t._v("Class 可以通过 "),a("code",[t._v("new")]),t._v(" 关键字进行实例化，但无法直接进行函数调用。也就是说，虽然 "),a("code",[t._v("typeof Person")]),t._v(" 的结果是 "),a("code",[t._v("function")]),t._v("，但是我们没有办法像使用函数一样调用它。这是因为 ES6 的函数有一个内部的 "),a("code",[t._v("[[call]]")]),t._v(" 状态，在"),a("a",{attrs:{href:"http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist",target:"_blank",rel:"noopener noreferrer"}},[t._v("标准中将 Class 作为函数调用"),a("OutboundLink")],1),t._v("被禁止了(并不意味着以后不会放开这个限制)。")]),t._m(10),t._m(11),a("p",[t._v("也就是说，“Class 声明不会被 hoisted”。有以下原因：")]),t._m(12),t._m(13),a("p",[t._v("新的提案会改变这种策略。")]),t._m(14),t._m(15),t._m(16),t._m(17),a("p",[t._v("什么是 Object Oriented Programming(OOP)？有些人可能会回答：封装(Encapsulation)、继承(Inheritance) 和 多态(Polymorphism)。emmm, that's right. But What does it means?")]),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),a("p",[t._v("此外，有一点需要强调的是：子类也是 Class，而不是父类的实例。")]),t._m(26),a("p",[t._v("可能 "),a("a",{attrs:{href:"https://brendaneich.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brendan Eich"),a("OutboundLink")],1),t._v(" 都没想到 JavaScript 面向对象的设计会演变成现在这样。en~~~，我的意思是："),a("code",[t._v("[[Prototype]]")]),t._v(" 或许是实现 OOP(Object Oriented Programming) 的一种方式，但官方(社区)无时无刻不在模仿传统 Class 的 OOP 设计不禁让人诧异。接下来就知道，"),a("code",[t._v("[[Prototype]]")]),t._v(" 和 Class 的表现完全不一样！！！")]),t._m(27),a("p",[t._v("在传统的 Class 理论中，Class 和 Instance 是 “蓝图” 和 “建筑” 的关系，多个实例就是多份 Class 所描述的特性的拷贝。从内存的角度而言，Class 声明只是存在于代码段(Text Segment)的一段特性描述代码，只有在实例化的时候才会被动态分配到 Heap 或 Stack。")]),t._m(28),t._m(29),t._m(30),a("p",[t._v("为什么会这样说？我们来看一个案例(ES5 的方式)：")]),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),a("p",[t._v("我们来看一个继承的例子：")]),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),a("p",[t._v("在知道 JavaScript 真正的 OOP 方式是通过 “对象关联” 而非 Class 中描述的所有特性的 “拷贝”。我们不禁要思考：是什么导致 JavaScript 的 OOP 朝着 “模拟” Class 进行发展的。")]),t._m(48),a("p",[t._v("有哪些概念模糊了 JavaScript 的 OOP 的真实呢？")]),t._m(49),t._m(50),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),a("p",[t._v("试着，举个例子。ES6 之前，我们的写法是这样的：")]),t._m(62),t._m(63),t._m(64),a("p",[t._v("第一眼看上去似乎完全一致，但实际上存在一定的副作用。")]),t._m(65),t._m(66),t._m(67),a("p",[t._v("所以，为了得到正确的结果。我们需要手动 “委托” 一下。")]),t._m(68),t._m(69),t._m(70),t._m(71),t._m(72),a("p",[t._v("从另一方面来考虑，ES6 Class 并非一无是处。")]),t._m(73),t._m(74),a("p",[t._v("是的，我们无法回到 1995 年(JavaScript 诞生的年份)，正如 JavaScript 无法回头。既然如此，何不抬头向前看。随着 ES6 Class 新特性的补充和完善，或许有那么一天，我们不必去深究隐藏在 ES6 Class 下的那一头巨大的 “猛兽”。")]),t._m(75),a("p",[t._v("“委托” 是一种模拟 “原型链” 工作原理的说法。")]),t._m(76),t._m(77),a("p",[t._v("但是，试图覆盖某个属性或方法时，情况要稍微复杂一点：")]),t._m(78),t._m(79),t._m(80),t._m(81),a("p",[t._v("接下来的部分将抛开 “真实的 Class 理论”，而挖掘 ES6 中 Class 的实现 - 一种 “近似” 的 Class 实现。")]),a("p",[t._v("ES6 Class 内部只有方法，例子如下：")]),t._m(82),t._m(83),t._m(84),t._m(85),t._m(86),t._m(87),t._m(88),t._m(89),t._m(90),t._m(91),a("p",[t._v("ES6 Class 可以为所有的方法和 Getter/Setter 使用 static 属性。static 方法属于 Class 本身，其实例不可用。")]),t._m(92),t._m(93),t._m(94),t._m(95),t._m(96),a("p",[t._v("不管是为了向下兼容还是其他，我们可以通过定义 static 方法来返回我们的 Class 实例。比如：")]),t._m(97),t._m(98),t._m(99),t._m(100),t._m(101),a("p",[t._v("但是这种做法并不推荐。")]),t._m(102),t._m(103),t._m(104),t._m(105),t._m(106),t._m(107),t._m(108),t._m(109),t._m(110),a("p",[t._v("这一点和 ES6 之前的有点不同。同时这一点也导致 “父类” 的 static 成员函数会被接入原型链。")]),t._m(111),t._m(112),t._m(113),t._m(114),t._m(115),t._m(116),t._m(117),t._m(118),t._m(119),t._m(120),t._m(121),t._m(122),t._m(123),t._m(124),a("p",[t._v("上诉代码似乎也表明一个事实："),a("code",[t._v("super")]),t._v(" 并非和 "),a("code",[t._v("this")]),t._v(" 一样 “动态绑定”。在内部有一个 "),a("code",[t._v("[[HomeObject]]")]),t._v(" 记录着使用了 "),a("code",[t._v("super")]),t._v(" 的函数的环境，在声明时 "),a("code",[t._v("[HomeObject]]")]),t._v(" 就已经确定了，"),a("a",{attrs:{href:"http://www.ecma-international.org/ecma-262/6.0/#sec-function-environment-records",target:"_blank",rel:"noopener noreferrer"}},[t._v("也无法再次被修改"),a("OutboundLink")],1),t._v("。")]),t._m(125),t._m(126),t._m(127),t._m(128),t._m(129),a("p",[t._v("ES6 之前，很多内置的对象比如 "),a("code",[t._v("Array")]),t._v("、"),a("code",[t._v("Function")]),t._v(" 等等都无法 "),a("a",{attrs:{href:"http://speakingjs.com/es5/ch28.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("“父类化”"),a("OutboundLink")],1),t._v("。比如：")]),t._m(130),t._m(131),a("p",[t._v("ES5 Class 弥补了这方面的缺陷。")]),t._m(132),t._m(133),t._m(134),t._m(135),t._m(136),t._m(137),t._m(138),t._m(139),t._m(140),t._m(141),t._m(142),t._m(143),t._m(144),t._m(145),a("p",[t._v("疑问发人深省！！！一个简单的字面量 Object 是不是就可以满足要求？JavaScript 是不是原生就支持单例模式？那为何我们还需要多此一举？")]),t._m(146),t._m(147),a("p",[t._v("虽然有近似 Class 的语法，但是 JavaScript 的这个近似 Class 的表象之下，其实和真实的 Class 完全不一样。")]),t._m(148),t._m(149),a("p",[t._v("[1] https://searchmicroservices.techtarget.com/definition/object-oriented-programming-OOP")]),a("p",[t._v("[2] https://stackoverflow.com/questions/2078978/functional-programming-vs-object-oriented-programming")]),a("p",[t._v("[3] https://www.reddit.com/r/javascript/comments/58yvgk/what_is_the_point_of_static_methods_in_classes/")]),a("p",[t._v("[4] Design Patterns - Elements of Reusable Object-Oriented Softwave")]),a("p",[t._v("[5] https://stackoverflow.com/questions/38739499/anonymous-class-instance-is-it-a-bad-idea")]),a("p",[t._v("[6] http://adambien.blog/roller/abien/entry/singleton_pattern_in_es6_and")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"近似-class-的操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#近似-class-的操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 近似 Class 的操作")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("[ ] this.xxx 要在 super() 之前")]),s("li",[this._v("[ ] class 的新提案 1. # 2. 成员函数表达式")]),s("li",[this._v("[ ] this/Person/constructor")]),s("li",[this._v("[ ] constructor 可以是 static 吗")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Overview")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是一个最简单的 class "),s("code",[this._v("Person")]),this._v(" 和 derived class "),s("code",[this._v("Empolyee")]),this._v("：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("create")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("this")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Employee")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" title\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v(" - ")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"class-的类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-的类型","aria-hidden":"true"}},[this._v("#")]),this._v(" Class 的类型")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("常说 Class 只是 "),s("em",[this._v("语法糖")]),this._v(" 而已，「不是什么大不了的东西」。举证如下：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("typeof")]),this._v(" Person "),s("span",{attrs:{class:"token comment"}},[this._v("// 'function'")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("「没什么大不了的东西」似乎看上去是这样，但我往往不敢这么描述。如果某些看上去很简单的东西，How about diging deeper?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"can-t-invoke-via-a-function-call"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-t-invoke-via-a-function-call","aria-hidden":"true"}},[this._v("#")]),this._v(" Can't invoke via a function call")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("Person")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("  "),s("span",{attrs:{class:"token comment"}},[this._v("// TypeError: Classes can’t be function-called")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"class-声明存在暂时性死区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-声明存在暂时性死区","aria-hidden":"true"}},[this._v("#")]),this._v(" Class 声明存在暂时性死区")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("p",[t._v("和引入 "),a("code",[t._v("let")]),t._v("、"),a("code",[t._v("const")]),t._v(" 保持一致的理论。")])]),a("li",[a("p",[t._v("另外是因为 "),a("code",[t._v("extends")]),t._v(" 语句的限制。这个我们会稍后讨论。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"this-不能用在-super-之前"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-不能用在-super-之前","aria-hidden":"true"}},[this._v("#")]),this._v(" this 不能用在 super 之前")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"class-内只有方法，没有数据属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-内只有方法，没有数据属性","aria-hidden":"true"}},[this._v("#")]),this._v(" Class 内只有方法，没有数据属性")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这样处理的用意在：Prototype 有数据属性被认为是 anti-pattern。因此，所有的数据属性声明都可以放在 "),s("code",[this._v("constructor")]),this._v(" 内。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"面向对象编程的理论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#面向对象编程的理论","aria-hidden":"true"}},[this._v("#")]),this._v(" 面向对象编程的理论")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Class 描述了一种代码的组织方式，是软件对真实世界的一种建模，即 "),s("strong",[this._v("对象以及操作对象的行为组装在一起")]),s("sup",[this._v("1")]),this._v("。意思是说，OOP 关注的是对象(数据)的一系列操作"),s("sup",[this._v("2")]),this._v("，而非逻辑。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"实例化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例化","aria-hidden":"true"}},[this._v("#")]),this._v(" 实例化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Class 只是一个 “蓝图”，是描述一个 "),s("strong",[this._v("对象应该是什么样子")]),this._v("。而真正进行逻辑操作和交互的数据，需要进行 Class 的 "),s("strong",[this._v("实例化")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Class 的 "),s("em",[this._v("实例")]),this._v("(Instance)，就是 Class 中描述的所有特性的一份 "),s("strong",[this._v("拷贝")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构造函数","aria-hidden":"true"}},[this._v("#")]),this._v(" 构造函数")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("凭空实例化一个 Class 是存在于想象中的。Class 的实例需要 "),s("em",[this._v("构造函数")]),this._v("(Constructor) 进行构造，这个方法的任务就是 "),s("em",[this._v("初始化")]),this._v(" 实例需要的所有状态。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"继承"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#继承","aria-hidden":"true"}},[this._v("#")]),this._v(" 继承")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("继承有点类似于基因的遗传 - 父母的基因特性会遗传给孩子。但这并不意味着孩子的特性完全复制父母的特性。"),s("strong",[this._v("相对于父类来说，子类是一个独立且完全不同的 Class")]),this._v("。子类会包含父类行为的原始副本，但也可以重写所有继承的行为或定义新行为。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"javascript-面向对象编程理论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-面向对象编程理论","aria-hidden":"true"}},[this._v("#")]),this._v(" JavaScript 面向对象编程理论")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"传统的-class-是复制的，-prototype-是关联的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传统的-class-是复制的，-prototype-是关联的","aria-hidden":"true"}},[this._v("#")]),this._v(" 传统的 Class 是复制的，[[Prototype]] 是关联的")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("但 "),s("code",[this._v("[[Prototype]]")]),this._v(" 并不是这样。我们无法创建 “Class” 的多个 “实例”，只能创建多个 “多个对象”。两个对象之间通过 "),s("code",[this._v("[[Prototype]]")]),this._v(" 进行关联，实际上我们并没有任何 “拷贝” 操作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"javascript-的-“class”-和-“继承”-只是一种对象关联"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-的-“class”-和-“继承”-只是一种对象关联","aria-hidden":"true"}},[this._v("#")]),this._v(" JavaScript 的 “Class” 和 “继承” 只是一种对象关联")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 JavaScript 中描述 “Class” 本身就是个错误的叙述(是的，只有 "),s("code",[this._v("[[Prototype]]")]),this._v("，没有 Class)，所以我添上了 "),s("code",[this._v("“”")]),this._v(" 来作为一种注解。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们将分析 "),s("code",[this._v("me")]),this._v("、"),s("code",[this._v("Person")]),this._v(" 和 "),s("code",[this._v("Person.prototype")]),this._v(" 的关系图。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://github.com/maoxiaoke/xiaokedada/blob/master/assets/prototype.png?raw=true",alt:""}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("可以看到， "),a("code",[t._v("桥接")]),t._v(" 了 “构造函数” ("),a("code",[t._v("Person()")]),t._v(") 和 “实例” ("),a("code",[t._v("me")]),t._v(") 的实际上是"),a("code",[t._v("Person.prototype")]),t._v("。也就是说，“实例” 和 “构造函数” 之间没有任何 "),a("strong",[t._v("直接联系")]),t._v(" (当然，你完全可以反问到："),a("code",[t._v("me")]),t._v(" 的 "),a("code",[t._v("constructor")]),t._v(" 指向了 "),a("code",[t._v("Person()")]),t._v(" 呀，这个稍后解释)。"),a("code",[t._v("Person.prototype")]),t._v(" 作为一个 “代理人” 将两者联系到了一起。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("是的，"),a("code",[t._v("[[Prototype]]")]),t._v(" “建造” 了这一切(注意：不是 "),a("code",[t._v("prototype")]),t._v(")。"),a("em",[t._v("几乎")]),t._v(" 所有的对象在创建时都会携带一个 "),a("code",[t._v("[[Prototype]]")]),t._v(" 的内部属性。这个属性的值实际上是另一个对象的引用，这是一种 "),a("strong",[t._v("关联关系")]),t._v("，而非 “拷贝” 关系。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("对上图三个内部 "),s("code",[this._v("[[Prototype]]")]),this._v(" 的解释：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("构造函数(当然，函数也是对象)的 "),a("code",[t._v("[[Prototype]]")]),t._v(" 是 "),a("code",[t._v("Function.prototype")]),t._v(" 的引用，因为 JavaScript 中所有的函数都是由 "),a("code",[t._v("Function()")]),t._v(" “构造” 的。")])]),a("li",[a("p",[t._v("对象 "),a("code",[t._v("Person.prototype")]),t._v(" 的 "),a("code",[t._v("[[Prototype]]")]),t._v(" 是 "),a("code",[t._v("Object.prototype")]),t._v(" 的引用。"),a("code",[t._v("Object.prototype")]),t._v(" 是所有对象(当然，函数也是对象) 的 “终点”。")])]),a("li",[a("p",[t._v("对象 "),a("code",[t._v("me")]),t._v(" 的 "),a("code",[t._v("[[Prototype]]")]),t._v(" 是 "),a("code",[t._v("Person.prototype")]),t._v(" 的引用，而这是通过关键词 "),a("code",[t._v("new")]),t._v(" 实现的。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("最后，让我们思考一个问题："),s("code",[this._v("Function.prototype")]),this._v(" 的内部 "),s("code",[this._v("[[Prototype]]")]),this._v(" 指向何处？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("en~~~，应该很简单。"),s("code",[this._v("Object.prototype")]),this._v(" 是所有对象的 “终点”。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"继承同样是通过-“关联”-建立关系的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#继承同样是通过-“关联”-建立关系的","aria-hidden":"true"}},[this._v("#")]),this._v(" 继承同样是通过 “关联” 建立关系的")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Empolyee")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Person"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("call")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" title\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nEmpolyee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// A")]),t._v("\nEmpolyee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Employee\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Empolyee")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'JavaScript Developer'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上面代码的 “A 行” 的表现不尽人意。如果 “构造” 函数 "),s("code",[this._v("Person()")]),this._v(" 有副作用，就会影响到 "),s("code",[this._v("Employee")]),this._v(" 的 “实例”。我们可以使用 "),s("code",[this._v("Object.create()")]),this._v(" 代替。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Empolyee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// A")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("最好的做法是 使用 "),s("code",[this._v("setPrototypeOf")]),this._v(" 直接修改 "),s("code",[this._v("Bar.prototype")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setPrototypeOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Empolyee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Person"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("但无论上述哪种方式，意思都表示："),s("strong",[this._v("创建新的(替换旧的) Empolyee.prototype，并把它关联到 Person.prototype")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"new、constructor、实例等概念隐藏了-prototype-的真实"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new、constructor、实例等概念隐藏了-prototype-的真实","aria-hidden":"true"}},[this._v("#")]),this._v(" new、constructor、实例等概念隐藏了 [[Prototype]] 的真实")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("结论是：函数的 "),s("code",[this._v("prototype")]),this._v("。所有的函数都默认拥有一个名为 "),s("code",[this._v("prototype")]),this._v(" 的属性，指向 "),s("code",[this._v("函数.prototype")]),this._v("，同时在 “prototype chain” 中占据一个位置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("“构造” 函数的首字母大写命名")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("很多规范都鼓励我们采用 "),s("em",[this._v("大驼峰")]),this._v("(Upper Camel Case) 的方式命名 “构造” 函数，从而营造出 “类” 的感觉。“构造” 函数和其他函数并没有什么不同，“构造” 函数也没有构造 “实例”。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[s("code",[this._v("new")]),this._v(" 和 “构造” 函数")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上面的代码中，看到了关键字 "),s("code",[this._v("new")]),this._v("，另外我们看上去是代码执行了 “类的构造函数”。在传统的面向 Class 语言中，两者紧密结合。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("似乎，我们通过这两者 “构建了 Class 的实例”。这种曲解的理解是不对的，"),a("code",[t._v("new")]),t._v(" 只是 "),a("strong",[t._v("间接")]),t._v(" 地建立了两个对象的 "),a("strong",[t._v("关系")]),t._v("。就是说，"),a("code",[t._v("new")]),t._v(" 割断了对象原本的 "),a("em",[t._v("关联关系")]),t._v("(一般情况下，是 "),a("code",[t._v("Object.prototype")]),t._v(")，建立了于另一个对象 "),a("code",[t._v("构造函数.prototype")]),t._v(" 的 "),a("em",[t._v("关联关系")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("只有 "),s("code",[this._v("new")]),this._v(" 调用的函数，我们才亲切地成为 “构造函数”。我们摘录 "),s("code",[this._v("new")]),this._v(" 四个步骤：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("一个全新的对象被构建")]),s("li",[this._v("这个新构建的对象会被接入原型链")]),s("li",[this._v("新构建的对象被设置为函数调用的 this 绑定")]),s("li",[this._v("除非函数返回一个它自己的其他对象，否则这个被 new 调用的函数将自动返回这个新构建的对象")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("还要一种直接建立两个对象之间的 "),s("em",[this._v("关联关系")]),this._v(" 的方式是："),s("code",[this._v("Object.create()")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("“虚假” 的 constructor")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("回顾上面的 "),a("code",[t._v("[[Prototype]]")]),t._v("、"),a("code",[t._v("prototype")]),t._v(" 和 "),a("code",[t._v("constructor")]),t._v(" 指向问题。几乎每个对象(当然，函数也是对象) 都有一个 "),a("code",[t._v(".constructor")]),t._v(" 属性。令人费解的是，"),a("code",[t._v("me.constructor")]),t._v(" 和 "),a("code",[t._v("Fun.prototype.constructor")]),t._v(" 同时指向了 “构造” 函数 "),a("code",[t._v("Person")]),t._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("me"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" Person\nFun"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" Person\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这看上去像是一种误导，"),s("code",[this._v("me.constructor")]),this._v(" 只是通过默认的 "),s("code",[this._v("[[Prototype]]")]),this._v(" “委托” 指向了 "),s("code",[this._v("Person")]),this._v("，和 “构造” 并无关系(即，“虚假” 的关系)。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("那么，既然是 "),s("code",[this._v("Person.prototype")]),this._v(" 是对象，是不是可以采用对象字面量的写法呢。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  toString"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("me"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" Person "),a("span",{attrs:{class:"token comment"}},[t._v("// false")]),t._v("\nme"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" Object "),a("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("如果认为 "),a("code",[t._v("constructor")]),t._v(" 是 "),a("code",[t._v("由...构造")]),t._v(" 的话。"),a("code",[t._v("a.constructor")]),t._v(" 应该是 "),a("code",[t._v("Person")]),t._v(" 的引用，而非 "),a("code",[t._v("Object")]),t._v("。这是怎么回事？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("这是因为 "),a("code",[t._v("a")]),t._v(" 并没有 "),a("code",[t._v("constructor")]),t._v(" 属性，所以它委托原型链上的 "),a("code",[t._v("Person.prototype")]),t._v("；但是，由于是字面量的写法，所以 "),a("code",[t._v("Person.prototype")]),t._v(" 也没有 "),a("code",[t._v("constructor")]),t._v(" 属性；继续向上委托，交给顶端的 "),a("code",[t._v("Object.prototype")]),t._v("；这个对象有 "),a("code",[t._v("constructor")]),t._v(" 属性，而且是内置的 "),a("code",[t._v("Object")]),t._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  constructor"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Person"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  toString"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这种方式似乎也有点问题。因为 "),s("code",[this._v(".constructor")]),this._v(" 属性是不可枚举的，所以我们需要多做一些工作。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  toString"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("defineProperty")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'constructor'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  enumerable"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  writable"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  configurable"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  value"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Person\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("ES6 Class 的彻底偏航")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ES6 中通过 "),s("code",[this._v("class")]),this._v(" 关键字将这一行为推向了深渊。我们会毫不犹豫地将 ES6 Class 的行为和传统的 Class 行为联系到一起，从而再也不容易窥探到 JavaScript OOP 的本质。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("即，"),s("strong",[this._v("ES6 Class 越来越 “近似类”了")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("既然已经走偏，不如彻底偏航。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"me-和-person-prototype-是一种-“委托”-的关联关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#me-和-person-prototype-是一种-“委托”-的关联关系","aria-hidden":"true"}},[this._v("#")]),this._v(" me 和 Person.prototype 是一种 “委托” 的关联关系")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[this._v("me"),s("span",{attrs:{class:"token punctuation"}},[this._v(".")]),s("span",{attrs:{class:"token function"}},[this._v("toString")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("当 "),a("code",[t._v("toString()")]),t._v(" 不直接存在于 "),a("code",[t._v("me")]),t._v(" 中，就会将 "),a("code",[t._v("toSting()")]),t._v(" “委托” 给 "),a("code",[t._v("me")]),t._v(" 关联的 "),a("code",[t._v("Person.prototype")]),t._v("；如果还没有，就还会沿着 “原型链” 继续向上查找；如果找不到，则抛出一个 "),a("code",[t._v("TypeError")]),t._v(" 类型的错误。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[this._v("me"),s("span",{attrs:{class:"token punctuation"}},[this._v(".")]),this._v("title "),s("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v(" "),s("span",{attrs:{class:"token string"}},[this._v("'JavaScript Developer'")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("p",[t._v("如果在 “原型链” 上存在 "),a("code",[t._v("title")]),t._v(" 的一个可读的("),a("code",[t._v("writable: true")]),t._v(")属性，就会直接在 "),a("code",[t._v("me")]),t._v(" 中添加(或替换)一个 "),a("code",[t._v("title")]),t._v(" 属性，“屏蔽” 之前的属性；")])]),a("li",[a("p",[t._v("如果在 “原型链” 上存在 "),a("code",[t._v("title")]),t._v(" 的一个只读的("),a("code",[t._v("writable: false")]),t._v(")属性，无法修改已有属性或在 "),a("code",[t._v("me")]),t._v(" 上添加(或替换) "),a("code",[t._v("title")]),t._v(" 属性；")])]),a("li",[a("p",[t._v("如果在 “原型链” 上存在 "),a("code",[t._v("title")]),t._v(" 属性，并且它是一个 "),a("code",[t._v("setter")]),t._v("，则只会调用这个 "),a("code",[t._v("setter")]),t._v("。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"继承-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#继承-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 继承")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"es6-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6-class","aria-hidden":"true"}},[this._v("#")]),this._v(" ES6 Class")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("create")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("this")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("anotherName"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" anotherName\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("从方法的功能上，可以将 ES6 Class 的所有方法划分为三类："),s("code",[this._v("constructor")]),this._v("、"),s("code",[this._v("static")]),this._v(" 和 "),s("code",[this._v("prototype")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("同时，"),s("code",[this._v("static")]),this._v(" 和 "),s("code",[this._v("prototype")]),this._v(" 类别中又支持 Gettet、Setter、Computed 方法、Gengerator 等写法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"constructor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor","aria-hidden":"true"}},[this._v("#")]),this._v(" constructor")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当然，ES6 Class 的实例化也是通过 "),s("code",[this._v("constructor()")]),this._v(" 来实现的。该方法是内部方法 "),s("code",[this._v("[[Construct]]")]),this._v(" 的一个实现。每个 Class 都有一个 "),s("code",[this._v("constructor()")]),this._v(" 方法。不显式指定，则默认为：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("B")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"覆盖-constructor-的结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#覆盖-constructor-的结果","aria-hidden":"true"}},[this._v("#")]),this._v(" 覆盖 constructor 的结果")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("值得一提的是，和 ES6 之前的方式一样，我们可以显式覆盖 "),s("code",[this._v("constructor")]),this._v(" 的结果。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"static"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#static","aria-hidden":"true"}},[this._v("#")]),this._v(" static")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("那么，问题是：Class 中的 static 方法有什么存在的价值呢"),s("sup",[this._v("3")]),this._v("？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("很多实用的工具类函数，可以被定义成 static")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("比如，一个名为 "),s("code",[this._v("MyMath")]),this._v(" 的 Class，倘若 "),s("code",[this._v("MyMath")]),this._v(" 对象对外提供一个 "),s("code",[this._v("random()")]),this._v(" 的工具方法，定义为 static 方法会比普通的成员方法使用上更为简单，也不会担心会被子类重写。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("MyMath")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("random")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Math"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("random")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("返回 Class 的实例")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("defaultPerson")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("再例如 "),s("code",[this._v("Promise.resolve()")]),this._v(" 返回了一个 Promise。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"不推荐的-static-方法定义方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不推荐的-static-方法定义方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 不推荐的 static 方法定义方式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("还记得吗，Class 就是一个 "),s("code",[this._v("function")]),this._v("。我们还可以通过下面的方式来添加一个 static 方法：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPerson"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("create")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'name'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"prototype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prototype","aria-hidden":"true"}},[this._v("#")]),this._v(" prototype")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("以下面这个例子而言："),s("code",[this._v("toString()")]),this._v(" 就是 "),s("code",[this._v("Person.prototype")]),this._v(" 上的方法。这些方法一般可以被实例继承。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"es6-class-继承"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6-class-继承","aria-hidden":"true"}},[this._v("#")]),this._v(" ES6 Class 继承")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 ES6 Class 继承中，我们会多认识 "),s("code",[this._v("super")]),this._v(" 和 "),s("code",[this._v("extends")]),this._v(" 两个关键字。例子如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("create")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("this")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Employee")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" title\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v(" - ")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Employee")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'JavaScript Developer'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("[[Prototype]]")]),this._v(" 关系图如下图所示：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://github.com/maoxiaoke/xiaokedada/blob/master/assets/subclass-prototype.png?raw=true",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"子类的-prototype-指向-“父类”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#子类的-prototype-指向-“父类”","aria-hidden":"true"}},[this._v("#")]),this._v(" 子类的 [[Prototype]] 指向 “父类”")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Employee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'JavaScript Developer'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nme"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v('// "xiaoke - JavaScript Developer"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"super"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#super","aria-hidden":"true"}},[this._v("#")]),this._v(" super")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("从上面的例子中，我们可以看到 "),s("code",[this._v("super")]),this._v(" 的两种使用方式。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("用在 "),s("code",[this._v("constructor")]),this._v(" 中，"),s("code",[this._v("super")]),this._v(" 指代 “父类” 的 “构造函数”")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("这种情况下，"),a("code",[t._v("super()")]),t._v(" 就等同于调用 "),a("code",[t._v("new Person()")]),t._v("。千万不要误以为的是 "),a("code",[t._v("super")]),t._v(" 和 "),a("code",[t._v("Person")]),t._v(" 是等价的。也就是说，在 “子类” 的 “构造函数” 中，"),a("code",[t._v("super.prototype")]),t._v(" 是无效的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("还需要讲解的一点是：在 “子类” 的 “构造函数” 中，在未调用 "),s("code",[this._v("super()")]),this._v(" 之前，无法访问 "),s("code",[this._v("this")]),this._v("。这么做是有一定道理的。比如：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("PolitePerson")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("greeting")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 这是不被允许的")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("greeting")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Hello You!'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" me "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Employee")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'JavaScript Developer'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假设某一天，我们需要对 "),s("code",[this._v("greeting()")]),this._v(" 进行修改。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("greeting")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`Hello ")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 可是这个时候，this.name 还未定义")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了避免这样的陷阱，"),s("strong",[this._v("强制在 “构造函数” 中使用 "),s("code",[this._v("this")]),this._v(", 就需要先调用 "),s("code",[this._v("super()")])]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("用在成员 "),s("code",[this._v("prototype")]),this._v(" 方法中，"),s("code",[this._v("super")]),this._v(" 指代 “父类.prototype”")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这种情况，可以使用代码类比 "),s("code",[this._v("super")]),this._v(" 的效果。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" homeObject "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Employee"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" superObject "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getPrototypeOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("homeObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" superMethod "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" superObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" superMethod"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("call")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("也就是说，当调用 "),s("code",[this._v("super.toString()")]),this._v(" 时，使用的是当前的 "),s("code",[this._v("this")]),this._v(" (指向 "),s("code",[this._v("me")]),this._v(")。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"extends"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extends","aria-hidden":"true"}},[this._v("#")]),this._v(" extends")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("extends")]),this._v(" 语句恐怕是 ES6 Class 中最为闪光的一点了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Employee extends Person")]),this._v(" 即是说：将 "),s("code",[this._v("Employee.prototype")]),this._v(" 和 "),s("code",[this._v("Person.prototype")]),this._v(" “关联” 起来。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不止是如此，"),s("code",[this._v("extends")]),this._v(" 让我们(终于)有能力扩展内建对象的能力了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"“父类化”-es5-的内建对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#“父类化”-es5-的内建对象","aria-hidden":"true"}},[this._v("#")]),this._v(" “父类化” ES5 的内建对象")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("myArray")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Array"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("call")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" len"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmyArray"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("create")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Array"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"es6-的可能性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6-的可能性","aria-hidden":"true"}},[this._v("#")]),this._v(" ES6 的可能性")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("myArray")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Array")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("first")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("last")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"es-next"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es-next","aria-hidden":"true"}},[this._v("#")]),this._v(" ES Next")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"proposal-class-fields"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proposal-class-fields","aria-hidden":"true"}},[this._v("#")]),this._v(" proposal-class-fields")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"其他概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 其他概念")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"new-target"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-target","aria-hidden":"true"}},[this._v("#")]),this._v(" new.target")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"symbol-species"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#symbol-species","aria-hidden":"true"}},[this._v("#")]),this._v(" Symbol.species")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"class-单例模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-单例模式","aria-hidden":"true"}},[this._v("#")]),this._v(" Class 单例模式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("单例(singleton)是设计模式"),s("sup",[this._v("4")]),this._v("中常见的一种，是说 "),s("strong",[this._v("确保只存在唯一一个 Class 实例")]),this._v("。这是一种较易实现的模式，但下面的方式是有缺陷的"),s("sup",[this._v("5")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" singleton "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("personName")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("因为无法 "),s("strong",[this._v("确保")]),this._v(" 只存在唯一一个 Class 实例。这是因为我们可以很容易地使用 "),s("code",[this._v("constructor()")]),this._v(" 来创建 Class 的另一个实例。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" anotherInstance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("singleton"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'yuer'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// oh, no~~~")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不过这也提醒我们应该在 "),s("code",[this._v("constuctor()")]),this._v(" 做点什么来防止这种行为。我们可以定义一个变量来存储这个实例，当再次调用构造函数是，如果实例存在，则返回这个实例；否则，创建一个实例"),s("sup",[this._v("6")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" instance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ES Next")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" instance\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"我们真的需要吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们真的需要吗","aria-hidden":"true"}},[this._v("#")]),this._v(" 我们真的需要吗")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'xiaoke'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("Name")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"class-的批评"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-的批评","aria-hidden":"true"}},[this._v("#")]),this._v(" Class 的批评")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("syntax 和 semantics 的分离")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[this._v("#")]),this._v(" Reference")])}],!1,null,null,null);s.default=e.exports}}]);