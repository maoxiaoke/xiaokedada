(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{190:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),a("p",[t._v("TODO:")]),t._m(1),t._m(2),a("p",[t._v("我们使用 "),a("a",{attrs:{href:"http://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript"),a("OutboundLink")],1),t._v(" 来描述两者：")]),t._m(3),a("p",[t._v("两者的概念解释如下：")]),t._m(4),t._m(5),a("p",[t._v("iterable 包含以下几类：")]),t._m(6),a("p",[t._v("下面依次介绍：")]),t._m(7),t._m(8),t._m(9),t._m(10),a("p",[t._v("String 是 JavaScript 中的一个不可变数据类型。而且我们知道，针对 String 类型的很多操作，会将其包装成 Object，这也是字符串可以成为 iterable 的一个原因。")]),t._m(11),t._m(12),t._m(13),t._m(14),a("p",[t._v("WeakMap 不是 iterable。")]),t._m(15),a("p",[t._v("类似 Map，Set 也是 iterable。")]),t._m(16),a("p",[t._v("WeakSet 不是 iterable。")]),t._m(17),a("p",[t._v("变量 arguments 是特殊的，虽然在 ES6 中建议使用 rest 参数替代，但 arguments 也是个 iterable。")]),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),a("p",[t._v("简单对象可以使用 "),a("a",{attrs:{href:"https://lodash.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("lodash"),a("OutboundLink")],1),t._v(" 的 "),a("a",{attrs:{href:"https://lodash.com/docs/4.17.10#isPlainObject",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("_.isPlainObject()")]),a("OutboundLink")],1),t._v(" 函数来判定。亦可以使用 "),a("a",{attrs:{href:"https://github.com/reduxjs/redux/blob/master/src/utils/isPlainObject.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redux"),a("OutboundLink")],1),t._v(" 提供的方法。但两者对简单对象的定义并非一致。")]),t._m(31),t._m(32),a("p",[t._v("在 JavaScript 中，简单对象不是 iterable。这是规范默认的一种行为，是从这个方面考虑的：")]),t._m(33),t._m(34),t._m(35),a("p",[t._v("综上，当你想要将简单对象作为一类数据结构使用的话，使用 ES6 的 Map 是一种更合理的方式。")]),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),t._m(48),t._m(49),t._m(50),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),t._m(62),t._m(63),t._m(64),t._m(65),t._m(66),t._m(67),t._m(68),t._m(69),t._m(70),a("p",[t._v("我们可以实现一个既是 iterator 又是 iterable 的复杂对象。")]),t._m(71),a("p",[t._v("这实际上是一个非常常见的模式。ES6 很多内建的 iterator 都遵循这一模式。比如：")]),t._m(72),t._m(73),t._m(74),t._m(75),t._m(76),t._m(77),t._m(78),t._m(79),t._m(80),t._m(81),t._m(82),t._m(83),t._m(84),t._m(85),t._m(86),t._m(87),a("p",[t._v("ES6 中的 iterator 支持上述的 (1)、(2) 两种情况。在具体实现上，ES6 权衡了以下问题：")]),t._m(88),a("p",[t._v("当由使用者来控制迭代时，该迭代器就称为 external iterator；当由迭代器控制迭代时，该迭代器称为 internal iterator。在 ES6 中，iterator 支持这两类 iterator。")]),t._m(89),t._m(90),t._m(91),t._m(92),a("p",[t._v("iterator 本身可以定义迭代算法。这样，我们就可以满足最开始提到的两点：(1) 为迭代不同的数据结构提供了一个统一的接口；(2) 支持对单一集合的多种迭代方式。但同时，iterator 就会访问集合内的变量(有时候可能是私有的)，这样就会破坏集合的封装性。")]),a("p",[t._v("ES6 中的 iterator 本身定义了迭代算法。")]),t._m(93),a("p",[t._v("在迭代一个集合元素的同时更改这个集合是危险的。如果在遍历集合的时候增加或删除聚合元素，可能会导致两次访问同一个元素或者遗漏某个元素。一个简单的临时解决方案是拷贝该集合，然后对该拷贝进行迭代，但一般来说，这样的行为代价太高。")]),a("p",[t._v("TODO:")]),t._m(94),t._m(95),t._m(96),a("p",[t._v("TODO:")]),t._m(97),t._m(98),t._m(99),t._m(100),a("p",[t._v("[1] http://exploringjs.com/es6/ch_iteration.html#sec_plain-objects-not-iterable")]),a("p",[t._v("[2] Design Patterns - Elements of Reusable Object-Oriented Software")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"迭代协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#迭代协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 迭代协议")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("[x] WeakSet 和 WeakMap 为什么不是 iterable")]),s("li",[this._v("[ ] iterator 既是 iterable 的目的何在")]),s("li",[this._v("[ ] return / throw")]),s("li",[this._v("[ ] infinite sequences")]),s("li",[this._v("[ ] 设计模式中的 iterator 模式")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Overview")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Iterable")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Iterator\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Iterator")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IteratorResult\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("IteratorResult")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  value"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token builtin"}},[t._v("any")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  done"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("Iterable：一种数据结构，通过 "),a("code",[t._v("[Symbol.iterator]()")]),t._v(" 可获取到其内部元素。")]),a("li",[t._v("Iterator：类似于 "),a("em",[t._v("指针")]),t._v("。是一个特殊对象，通过它可以遍历到 iterable 的元素。(其原因便是，iterable 的 "),a("code",[t._v("[Symbol.iterator]()")]),t._v(" 方法返回该 iterable 的一个 iterator)。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"可迭代数据结构-iterable-的分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可迭代数据结构-iterable-的分类","aria-hidden":"true"}},[this._v("#")]),this._v(" 可迭代数据结构(iterable)的分类")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Array 和 Typed Array")]),s("li",[this._v("String")]),s("li",[this._v("Map")]),s("li",[this._v("Set")]),s("li",[this._v("arguments")]),s("li",[this._v("DOM 数据结构")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"array-和-typed-array"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#array-和-typed-array","aria-hidden":"true"}},[this._v("#")]),this._v(" Array 和 Typed Array")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 JavaScript 中，Array 是一种特殊的对象。我们可以通过 "),s("code",[this._v("Array.isArray()")]),this._v(" 来判定一个对象是不是数组。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nArray"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("isArray")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'a'")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'b'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#string","aria-hidden":"true"}},[this._v("#")]),this._v(" String")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'abc'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'a'")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'b'")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'c'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map","aria-hidden":"true"}},[this._v("#")]),this._v(" Map")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Map 是一系列 "),s("code",[this._v("[key, value]")]),this._v(" 组合。Map 的迭代顺序是确定的，即 "),s("code",[this._v("[key, value]")]),this._v(" 被添加的顺序。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" m "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" m"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ['a', 1]")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ['b', 2]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"set"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set","aria-hidden":"true"}},[this._v("#")]),this._v(" Set")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" s"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'a'")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'b'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"arguments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arguments","aria-hidden":"true"}},[this._v("#")]),this._v(" arguments")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("arg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("arg")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'a'")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 'b'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dom-数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-数据结构","aria-hidden":"true"}},[this._v("#")]),this._v(" DOM 数据结构")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" i "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelectorAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'div'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"entries-、keys-和-values"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entries-、keys-和-values","aria-hidden":"true"}},[this._v("#")]),this._v(" entries()、keys() 和 values()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("并非所有的 iterable 都来自 "),s("em",[this._v("数据结构")]),this._v("。Arrays、TypedArrays、Maps 和 Sets 都有三个 ES6 方法来返回 iterable。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("entries()")])]),s("li",[s("code",[this._v("keys()")])]),s("li",[s("code",[this._v("values()")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'c'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pair "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("entries")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pair"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\n[0, 'a']\n[1, 'b']\n[2, 'c']\n*/")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ES6 还专为简单对象提供了 "),s("code",[this._v("Object.entries(obj)")]),this._v("、"),s("code",[this._v("Object.keys(obj)")]),this._v(" 和 "),s("code",[this._v("Object.values()")]),this._v(" 来返回 iterable。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'1'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'2'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pair "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("entries")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pair"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\n['a', '1']\n['b', '2 ']\n*/")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"简单对象不是可迭代数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单对象不是可迭代数据结构","aria-hidden":"true"}},[this._v("#")]),this._v(" 简单对象不是可迭代数据结构")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"什么是简单对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是简单对象","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是简单对象")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("通过字面量或 "),s("code",[this._v("new Object()")]),this._v(" 构建的对象，即为 "),s("em",[this._v("简单对象")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj1 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ncosnt obj2 "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// From Redux: https://github.com/reduxjs/redux/blob/master/src/utils/isPlainObject.js")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("isPlainObject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" obj "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" obj "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" proto "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getPrototypeOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proto"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    proto "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getPrototypeOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proto"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Object"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getPrototypeOf")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" proto\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"简单对象不是-iterable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单对象不是-iterable","aria-hidden":"true"}},[this._v("#")]),this._v(" 简单对象不是 iterable")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("JavaScript 中的对象涵盖广泛，当你试图迭代一个对象的所有属性的时候，这似乎办不到。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("可以使用 "),a("code",[t._v("Object.getOwnPropertyNames()")]),t._v(" 获取对象的"),a("em",[t._v("字符串")]),t._v("属性，对于 "),a("em",[t._v("Symbol")]),t._v(" 属性，提供了是 "),a("code",[t._v("Object.getOwnPropertySymbols()")]),t._v("；对于是否需要迭代继承属性，这也会变成无休止的争论。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("如果试图迭代一个简单对象，这将分裂你的代码\n当迭代一个简单对象时，这将赋予简单对象“数据结构”的属性(也就是说将对象转变为一种数据结构)。但对象是属于 "),a("em",[t._v("程序级")]),t._v("(Program Level) 的"),a("sup",[t._v("[1]")]),t._v("，这就会混合 Program Level 和 "),a("em",[t._v("数据")]),t._v("(Data Level)，从而割裂了你的代码。")])]),a("li",[a("p",[t._v("当实施 "),a("code",[t._v("Object.create(null)")]),t._v(" 时\n若试图给简单对象添加 "),a("code",[t._v("Object.prototype[Symbol.iterator]()")]),t._v(" 方法，对于通过 "),a("code",[t._v("Object.create(null)")]),t._v(" 构建的简单对象，会被作为特例存在。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"weakmap-和-weakset-不是-iterable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#weakmap-和-weakset-不是-iterable","aria-hidden":"true"}},[this._v("#")]),this._v(" WeakMap 和 WeakSet 不是 iterable")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("WeakMap")]),t._v(" 和 "),a("code",[t._v("WeakSet")]),t._v(" 都是「弱引用」元素。你无法获知 "),a("code",[t._v("WeakMap")]),t._v(" 或 "),a("code",[t._v("WeakSet")]),t._v(" 的全貌。因此，也不是 iterable。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"实施-iteration-protocol-的操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实施-iteration-protocol-的操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 实施 Iteration Protocol 的操作")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 ES6 中，有些方法默认采用 "),s("em",[this._v("迭代协议")]),this._v("(即 iterator 协议和 iterable 协议的统称，Iteration protocol)。分别有：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("for...of")])]),a("li",[a("code",[t._v("Array.from")])]),a("li",[t._v("spread 运算符")]),a("li",[t._v("Array 的解构")]),a("li",[t._v("Maps 和 Sets 的构造函数")]),a("li",[a("code",[t._v("Promise.all()")]),t._v("、"),a("code",[t._v("Promise.race()")])]),a("li",[a("code",[t._v("yield*")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"for-of"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#for-of","aria-hidden":"true"}},[this._v("#")]),this._v(" for...of")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" iterable"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("陷阱："),s("code",[this._v("for...of")]),this._v(" 只能迭代 iterable。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arrayLike "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" length"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" arrayLike"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// TypeError")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"array-from"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#array-from","aria-hidden":"true"}},[this._v("#")]),this._v(" Array.from")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Array.from")]),this._v(" 可以从类数组和 iterable 得到一个 "),s("em",[this._v("浅拷贝")]),this._v(" 数组。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arrayLike "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" length"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nArray"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arrayLike"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ['a', 'b']")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'abc'")]),t._v("\nArray"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ['a', 'b', 'c']")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"spread-运算符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spread-运算符","aria-hidden":"true"}},[this._v("#")]),this._v(" spread 运算符")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Math"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("max")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("8")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 8")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"maps-和-sets-的构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maps-和-sets-的构造函数","aria-hidden":"true"}},[this._v("#")]),this._v(" Maps 和 Sets 的构造函数")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" map "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("map")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"promise-all-和-promise-race"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise-all-和-promise-race","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise.all() 和 Promise.race()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("若你理解 "),s("code",[this._v("Promise")]),this._v(" 的话，你就应该知道 "),s("code",[this._v("Promise.all()")]),this._v(" 和 "),s("code",[this._v("Promise.race()")]),this._v(" 都采用了迭代协议。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"yield"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yield","aria-hidden":"true"}},[this._v("#")]),this._v(" yield*")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们将在 "),s("code",[this._v("Generator")]),this._v(" 一节提到这个。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"通过-iterator-实现「非常规」的-iterable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-iterator-实现「非常规」的-iterable","aria-hidden":"true"}},[this._v("#")]),this._v(" 通过 iterator 实现「非常规」的 iterable")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("迭代协议")]),this._v(" 的具体实施如下图：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://p3puylt4n.bkt.clouddn.com/iteration_protocol.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可迭代数据结构(iterable)会有一个(自身的，或者继承来的)方法："),s("code",[this._v("Symbol.iterator")]),this._v("。该方法返回一个 iterator。iterator 通过自身的 "),s("code",[this._v("next()")]),this._v(" 方法迭代 iterator 的元素。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"覆盖默认的-symbol-iterator-方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#覆盖默认的-symbol-iterator-方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 覆盖默认的 Symbol.iterator 方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们可以通过覆盖 iterable 原生的 "),s("code",[this._v("Symbol.iterator")]),this._v(" 方法，来了解一下 "),s("code",[this._v("next()")]),this._v(" 的工作机制。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("「覆盖」一词并不准确。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token string"}},[t._v("'xiao'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\niter"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" step "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" iter"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("step"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      step"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" done "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" step "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" iter"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("next()")]),this._v(" 返回一个包含 "),s("code",[this._v("value")]),this._v(" 和 "),s("code",[this._v("done")]),this._v(" 两个属性的对象。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("value")]),t._v(" - 当前项。若 "),a("code",[t._v("done")]),t._v(" 为 "),a("code",[t._v("true")]),t._v("，当前项和之后的项会被忽略。")]),a("li",[a("code",[t._v("done")]),t._v(" - 布尔值标记，没有更多可返回的数据时返回 "),a("code",[t._v("true")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iterator "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" iter"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// { value: 'x', done: false }  (1)")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// { value: 'i', done: false }  (2)")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// { value: 'a', done: false }  (3)")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// { value: 'o', done: false }  (4)")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// { value: undefined, done: true } (5)")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"可以省略的-value-undefined-和-done-false"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以省略的-value-undefined-和-done-false","aria-hidden":"true"}},[this._v("#")]),this._v(" 可以省略的 value: undefined 和 done: false")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("value: undefined")]),t._v(" 和 "),a("code",[t._v("done: false")]),t._v(" 都是可以省略的，当我们看到没有返回 "),a("code",[t._v("value")]),t._v(" 或 "),a("code",[t._v("done")]),t._v(" 属性的情况，一定要把这一点记在心里。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iterable "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" step "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("step "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          step"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("step"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'x'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" done"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" iterable"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iter"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\n'x'\n*/")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"既是-iterator-又是-iterable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#既是-iterator-又是-iterable","aria-hidden":"true"}},[this._v("#")]),this._v(" 既是 iterator 又是 iterable")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("iterateOver")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" index "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" done"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\niter"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" iter\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\ntrue\n*/")]),t._v("\n\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\nSymbol(Symbol.iterator): ƒ [Symbol.iterator]()\n*/")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上例中，"),s("code",[this._v("iter")]),this._v(" 是一个 iterator，但同时也是一个 iterable。通过其原型，赋予了其 "),s("code",[this._v("[Symbol.iterator]")]),this._v(" 的能力。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"目的何在"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的何在","aria-hidden":"true"}},[this._v("#")]),this._v(" 目的何在")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"引入迭代协议的目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入迭代协议的目的","aria-hidden":"true"}},[this._v("#")]),this._v(" 引入迭代协议的目的")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("在这里，我们将重新审视「引入迭代协议的目的」。首先，为了向后兼容，"),a("code",[t._v("forEach")]),t._v("、"),a("code",[t._v("for...in")]),t._v(" 等迭代的方式并没有采用 ES6 的 "),a("em",[t._v("迭代协议")]),t._v("；其次，也是因为新引入了 Symbol，才让 "),a("em",[t._v("迭代协议")]),t._v(" 大放异彩。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ES6 如此坚持地引入 "),s("em",[this._v("迭代协议")]),this._v("，我觉得有以下理由：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"从数据的角度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从数据的角度","aria-hidden":"true"}},[this._v("#")]),this._v(" 从数据的角度")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("正如在「简单对象不是不是 iterator」的思考中，我们从 "),s("em",[this._v("数据")]),this._v(" 和 "),s("em",[this._v("程序")]),this._v(" 两个层次来分析这样设计的合理性："),s("strong",[this._v("迭代协议是从数据的角度，为数据结构提供的一种迭代方式")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("对于我们的 Iterator 接口(Interface Iterator)，其有一个 "),s("em",[this._v("数据源")]),this._v("(Data Source) 和 一个 "),s("em",[this._v("数据消费方")]),this._v("(Data Consumers)。而 "),s("em",[this._v("迭代协议")]),this._v(" 便是建立在两者之间的桥梁。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://p3puylt4n.bkt.clouddn.com/consumers_sources.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Data Source(or Data Producer) - 诸如 String、Array、Map、Set 这样的数据结构作为数据源(即 Iterable)，拥有 "),s("code",[this._v("[Symbol.iterator ]")]),this._v(" 方法，供迭代协议使用。")]),s("li",[this._v("Data Consumers - 诸如 "),s("code",[this._v("for...of")]),this._v("、spread operator 等 API，使用 Iterator 获取需要消费的数据。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"从-iterator-模式的角度看"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-iterator-模式的角度看","aria-hidden":"true"}},[this._v("#")]),this._v(" 从 iterator 模式的角度看")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在经典的「设计模式」"),s("sup",[this._v("2")]),this._v("中，iterator 模式(迭代器模式) 是一种 "),s("em",[this._v("对象行为型模式的一种")]),this._v("。用来提供一种方法顺序访问一个集合对象(collections)中各个元素，而不用暴露其内部结构。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这种设计模式的关键思想是："),s("strong",[this._v("将对集合的迭代从集合中分离出来，并放入 iterator 对象中")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("另外，iterator 和集合是 "),s("strong",[this._v("耦合")]),this._v(" 的，其实现又是 "),s("strong",[this._v("抽象")]),this._v(" 的。表现在：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("p",[this._v("为迭代不同的数据结构提供了一个统一的接口 (即，支持多态)")])]),s("li",[s("p",[this._v("支持对单一集合的多种迭代方式(即，实现具体子类 Iterator)")])]),s("li",[s("p",[this._v("在同一集合上可以有多个遍历。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("谁来控制迭代")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// internal iterator")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iter "),a("span",{attrs:{class:"token keyword"}},[t._v("of")]),t._v(" arr"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// external iterator")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iterator "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\niterator"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用 external iterator 时，使用者必须主动推进迭代器的进程，显式地想迭代器请求下一个元素；而使用 internal iterator，使用者只需提供一个待执行的操作即可(比如，"),s("code",[this._v("for...of")]),this._v(")，iterator 即对集合内每个元素执行该操作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("谁来定义遍历算法")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("集合本身可以定义迭代算法，并在遍历过程中用 iterator 存储当前迭代的状态。这样的 iterator 只是一个 cursor(游标)，仅用来指示当前的状态。使用的时候，这个 cursor 可以作为一个参数调用集合的 "),s("code",[this._v("next()")]),this._v(" 方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("迭代器的健壮性考量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("[ ] ES6 如何处理以及例子？无限 sequence?")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("空迭代器")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("空迭代器(NullIterator) 是一个退化的 iterator，它可以用来处理边界条件。根据定义，空迭代器总是已经完成了遍历：即，它的 "),s("code",[this._v("done")]),this._v(" 值总是 "),s("code",[this._v("true")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("[ ] ES6 空迭代器的例子")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在「设计模式」"),s("sup",[this._v("2")]),this._v("还涉及到其他一些问题的权衡，这有助于我们去理解 ES6 中 "),s("em",[this._v("迭代协议")]),this._v(" 的设计。「这即是万物理论」。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"一个-“比喻”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一个-“比喻”","aria-hidden":"true"}},[this._v("#")]),this._v(" 一个 “比喻”")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"文献"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文献","aria-hidden":"true"}},[this._v("#")]),this._v(" 文献")])}],!1,null,null,null);s.default=e.exports}}]);