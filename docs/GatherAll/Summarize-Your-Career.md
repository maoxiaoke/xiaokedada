# 周月总结

以下内容按日期排序。

## 2018.08.21

这里主要记录调试有一个 bug 时候，找大佬同事解决 bug 的一些记录和思考。
问题描述：代码在本地 development 开发没有问题，但是发到线上访问就会页面卡死。这是其中一个比对，另一个对比是：微信未绑定前，页面访问正常；微信绑定后，页面访问卡死。

1. 刚接到问题反馈是在一周前，初步分析问题后，看到返回访问状态码为 200，但没有返回内容。但在终端 curl 是正常返回的。页面分别有两个请求，代码如下：
￼
![](http://p3puylt4n.bkt.clouddn.com/2018.08.21-debug.png)

怀疑是使用了 await 阻塞了线程运行。
便将问题抛给了后端，让他们看一下是否返回有问题。

后记：实际上这里的判断是有问题的，第一，请求是有 timeout 的；第二，其次 await 如何阻塞也不会导致页面卡死；第三，页面卡死大概率是因为有 死循环 导致，应该往这个方向考虑。

2. 几天后，后端反馈表示没有发现问题。认为既然能够 curl 成功，那后端可能没有多大问题。问题又抛给了我。
3. 于是，我又找了同事（代码是他写的）来一起排查 bug。分析我的问题之后，同事觉得是哪里造成了死循环，尤其重点关注 forEach。对上面的两个请求进行了挨个的 debugger。这一步是非常费时间的，每次注释代码后发布到测试环境。结果定位到只要注释了 commit(’setBindResult’, bindResult)页面就不会卡死。这很奇怪。所以我们又查看哪些地方用到了  bindResult。接下来就发现只要注释掉 `<kw-popover>` 页面同样不会卡死。所以，我们怀疑是组件的用法不对。怀疑是不是 `<kw-popover>` 的 :is-show.sync 和 trigger 的默认值为 click 导致的冲突。后面发现，并不是这个原因。最后结论归结于组件可能有bug。

![](http://p3puylt4n.bkt.clouddn.com/2018.08.21-debug02.png)
￼
4. 下午快五点的时候，又找了组件开发的同事询问这个问题。同事表示相同的代码，bug 无法复现，他怀疑我的代码存在死循环，开始调试我的代码。

+ 第一步：他给我的代码加上了  console.log 和 断点。

结果：正常输入结果，之后页面卡死。

+ 第二步：查看 console 面板。发现下面这个错误。

+ 第三步： 另开一个页面相同的写法，看是否还是这种情况。

结果：还是同样的报错。

+ 第四步：展开 warn 信息。挨个判断哪里出现了问题，同时查看了项目代码和组件库代码。
￼
+ 第五步：怀疑组件嵌套使用 `<Transition>` 的原因造成，查看组件库代码。

+ 第六步：google 搜索报错信息。得到 https://github.com/ElemeFE/element/issues/8652 用户使用 element 时同样的错误。

+ 第七步：查看项目 vue 版本。
￼
结果：没有查到 vue 版本。

+ 第八步：查找有关vue的仓库。
￼
结果：没有安装 vue

+ 第九步：查看 index.html，发现 vue 是通过 script 引入的。版本是 2.2.4。

+ 第十步： 更新 vue 版本到 2.5.2 ，vuex 版本到 2.5.0

结果： 问题解决


思考：

1. 最开始就要看 console 面板是否有 error 和 warn 信息，有非常大的价值。但是因为有时候在开发环境可能有很多报错信息，所以自己以前的做法是选择 clear console，导致没有没有看到，也不关心  error 和 warn 信息。这不是好的 debugger 习惯。
2. 学会比较 bug 产生和不产生之间的差别。在这里，是因为有个线上没有响应和开发响应正常的一个干扰，导致我们没有把重点放在收到数据后，会触发 `<kw-model>` 和 `<kw-popover>` 这一结果。
3. 尽早 google 看不懂的 error 和 warn 信息。
4. 关注库和框架的版本。

命令：

1.  ls node_modules | grep vue
2.  cat node_modules/vue/package.json | grep version

## 2018.08.24

1. 写代码前，理清业务需求、信息结构和内在逻辑。
2. 写代码前，理清和后端每一个接口和接口逻辑。
3. 确定风险。
4. 用 20% 的时间完成 80% 的需求。
5. 过早的性能优化是万恶之源。

## 2018.09.14 周五

1. 脑子反应太慢，跟不上别人的思路 - 如何加强锻炼？
2. 提问前，要仔细调研过(Google 之类的...)，再将问题列一个提纲。

## 2018.09.21 周五

1. 尽可能有效地管理自己的时间
2. 尽可能提高工作效率
3. 浏览科技文章放在一天工作的结束前
4. 当众分享收货：
  + 不一定要多深，但是一定每一句话自己都能很好地解释清除。这样，才不会感到怂。
  + 不要恐惧这种分享，不要恐惧质疑。

## 2018.10.01 周日

主要是来自语雀两篇文章的总结。一篇是 [芩安]() 的 「动力×思考力×性格秉性」。另一篇来自 [蔡志忠]() 的访谈 「努力是没有用的」。

想强调的一点是，**读一篇文章的时候，要能自己归纳总结出主要的内容**。

1. 人生的结果 = 行动力 * 思考力<sup>2</sup> * 性格秉性<sup>3</sup>

+ 结果由这三项乘积，短期的结果通常由行动力主导，中期的结果常常由思考力主导，长期的甚至一生的结果往往由性格秉性主导。
+ 如果其中任何一项太低或者接近 0，那么结果也接近于 0。
+ 这可能就是我们人生的三类瓶颈。缺乏行动力，缺乏思考力和不友好的性格和秉性。当我们遇到瓶颈的时候，就可能需要往这三个方面思考。
+ 这三类，不会是与生俱来的，都可能需要得到锻炼。
+ 思考的力量。

2. 单纯的努力是没用的
+ 倘若人生遇到了瓶颈，再怎么努力也是在瓶颈之下跳。只有克服了瓶颈，才能进一步往上走。
+ 要懂得思考、发问以及自己解决问题。
+ 改变观念 - 有时候这很难。
+ 要有自己的人生方向，避免在岔口迟疑。迟疑是非常浪费时间的。