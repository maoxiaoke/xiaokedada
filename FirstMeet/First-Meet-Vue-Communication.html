<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>解锁 vue2.0 通信的各种姿势 | XIAOKEDADA</title>
    <meta name="description" content="Write something useful and funny">
    <link rel="icon" href="/xiaokedada/favicon.png">
    
    <link rel="preload" href="/xiaokedada/assets/css/118.styles.306d23a5.css" as="style"><link rel="preload" href="/xiaokedada/assets/js/app.51d0a681.js" as="script"><link rel="preload" href="/xiaokedada/assets/js/83.86b6f686.js" as="script"><link rel="prefetch" href="/xiaokedada/assets/js/0.1bd12f53.js"><link rel="prefetch" href="/xiaokedada/assets/js/1.cd946af2.js"><link rel="prefetch" href="/xiaokedada/assets/js/2.ca24feb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/3.5dbaa314.js"><link rel="prefetch" href="/xiaokedada/assets/js/4.65842a86.js"><link rel="prefetch" href="/xiaokedada/assets/js/5.2706d991.js"><link rel="prefetch" href="/xiaokedada/assets/js/6.a9fa93eb.js"><link rel="prefetch" href="/xiaokedada/assets/js/7.07a04857.js"><link rel="prefetch" href="/xiaokedada/assets/js/8.2e73814c.js"><link rel="prefetch" href="/xiaokedada/assets/js/9.9a4ab9ea.js"><link rel="prefetch" href="/xiaokedada/assets/js/10.1579390c.js"><link rel="prefetch" href="/xiaokedada/assets/js/11.86a2e0ac.js"><link rel="prefetch" href="/xiaokedada/assets/js/12.86d07ec2.js"><link rel="prefetch" href="/xiaokedada/assets/js/13.51025cd6.js"><link rel="prefetch" href="/xiaokedada/assets/js/14.723e0304.js"><link rel="prefetch" href="/xiaokedada/assets/js/15.e05c4533.js"><link rel="prefetch" href="/xiaokedada/assets/js/16.4c1175d0.js"><link rel="prefetch" href="/xiaokedada/assets/js/17.6ea7b9a7.js"><link rel="prefetch" href="/xiaokedada/assets/js/18.743491d2.js"><link rel="prefetch" href="/xiaokedada/assets/js/19.c009a8b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/20.4676c2fd.js"><link rel="prefetch" href="/xiaokedada/assets/js/21.ba3174cf.js"><link rel="prefetch" href="/xiaokedada/assets/js/22.68278222.js"><link rel="prefetch" href="/xiaokedada/assets/js/23.c34c06a8.js"><link rel="prefetch" href="/xiaokedada/assets/js/24.d735d321.js"><link rel="prefetch" href="/xiaokedada/assets/js/25.640616f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/26.7712c941.js"><link rel="prefetch" href="/xiaokedada/assets/js/27.183b317a.js"><link rel="prefetch" href="/xiaokedada/assets/js/28.72e53d68.js"><link rel="prefetch" href="/xiaokedada/assets/js/29.906421b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/30.6e4aa06d.js"><link rel="prefetch" href="/xiaokedada/assets/js/31.b1150a91.js"><link rel="prefetch" href="/xiaokedada/assets/js/32.4a8d2fb5.js"><link rel="prefetch" href="/xiaokedada/assets/js/33.697a833c.js"><link rel="prefetch" href="/xiaokedada/assets/js/34.c414b291.js"><link rel="prefetch" href="/xiaokedada/assets/js/35.e321123d.js"><link rel="prefetch" href="/xiaokedada/assets/js/36.07df1a33.js"><link rel="prefetch" href="/xiaokedada/assets/js/37.c2092f91.js"><link rel="prefetch" href="/xiaokedada/assets/js/38.e999f6e6.js"><link rel="prefetch" href="/xiaokedada/assets/js/39.4ad0eec3.js"><link rel="prefetch" href="/xiaokedada/assets/js/40.15c13f22.js"><link rel="prefetch" href="/xiaokedada/assets/js/41.12d9540b.js"><link rel="prefetch" href="/xiaokedada/assets/js/42.048a5c79.js"><link rel="prefetch" href="/xiaokedada/assets/js/43.23a0cac2.js"><link rel="prefetch" href="/xiaokedada/assets/js/44.e552c633.js"><link rel="prefetch" href="/xiaokedada/assets/js/45.347f0a95.js"><link rel="prefetch" href="/xiaokedada/assets/js/46.59bb9a80.js"><link rel="prefetch" href="/xiaokedada/assets/js/47.0a72aee1.js"><link rel="prefetch" href="/xiaokedada/assets/js/48.32c141f4.js"><link rel="prefetch" href="/xiaokedada/assets/js/49.3610d444.js"><link rel="prefetch" href="/xiaokedada/assets/js/50.350e5049.js"><link rel="prefetch" href="/xiaokedada/assets/js/51.d01155cb.js"><link rel="prefetch" href="/xiaokedada/assets/js/52.a5015ced.js"><link rel="prefetch" href="/xiaokedada/assets/js/53.7b73d8b1.js"><link rel="prefetch" href="/xiaokedada/assets/js/54.092ee587.js"><link rel="prefetch" href="/xiaokedada/assets/js/55.9a2f189a.js"><link rel="prefetch" href="/xiaokedada/assets/js/56.27e46b17.js"><link rel="prefetch" href="/xiaokedada/assets/js/57.d080c747.js"><link rel="prefetch" href="/xiaokedada/assets/js/58.2364eb76.js"><link rel="prefetch" href="/xiaokedada/assets/js/59.9deb8139.js"><link rel="prefetch" href="/xiaokedada/assets/js/60.387795af.js"><link rel="prefetch" href="/xiaokedada/assets/js/61.3d0b8582.js"><link rel="prefetch" href="/xiaokedada/assets/js/62.f5702f6b.js"><link rel="prefetch" href="/xiaokedada/assets/js/63.6e8cc274.js"><link rel="prefetch" href="/xiaokedada/assets/js/64.59692959.js"><link rel="prefetch" href="/xiaokedada/assets/js/65.642d2089.js"><link rel="prefetch" href="/xiaokedada/assets/js/66.515778c0.js"><link rel="prefetch" href="/xiaokedada/assets/js/67.09fd142a.js"><link rel="prefetch" href="/xiaokedada/assets/js/68.d2fd2b20.js"><link rel="prefetch" href="/xiaokedada/assets/js/69.54b34dff.js"><link rel="prefetch" href="/xiaokedada/assets/js/70.08cfd9f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/71.8af3cac6.js"><link rel="prefetch" href="/xiaokedada/assets/js/72.8cf1ac97.js"><link rel="prefetch" href="/xiaokedada/assets/js/73.0d2c3de9.js"><link rel="prefetch" href="/xiaokedada/assets/js/74.c5383443.js"><link rel="prefetch" href="/xiaokedada/assets/js/75.b692daea.js"><link rel="prefetch" href="/xiaokedada/assets/js/76.f1760c70.js"><link rel="prefetch" href="/xiaokedada/assets/js/77.024d7794.js"><link rel="prefetch" href="/xiaokedada/assets/js/78.54101d27.js"><link rel="prefetch" href="/xiaokedada/assets/js/79.395e6dea.js"><link rel="prefetch" href="/xiaokedada/assets/js/80.3e659e88.js"><link rel="prefetch" href="/xiaokedada/assets/js/81.31d7c9c5.js"><link rel="prefetch" href="/xiaokedada/assets/js/82.76901e43.js"><link rel="prefetch" href="/xiaokedada/assets/js/84.e08c1f31.js"><link rel="prefetch" href="/xiaokedada/assets/js/85.a28700bf.js"><link rel="prefetch" href="/xiaokedada/assets/js/86.57747352.js"><link rel="prefetch" href="/xiaokedada/assets/js/87.6495c6ae.js"><link rel="prefetch" href="/xiaokedada/assets/js/88.fe6c9a90.js"><link rel="prefetch" href="/xiaokedada/assets/js/89.48f45856.js"><link rel="prefetch" href="/xiaokedada/assets/js/90.c2c96eb9.js"><link rel="prefetch" href="/xiaokedada/assets/js/91.466b65d5.js"><link rel="prefetch" href="/xiaokedada/assets/js/92.2c835547.js"><link rel="prefetch" href="/xiaokedada/assets/js/93.d0f32c26.js"><link rel="prefetch" href="/xiaokedada/assets/js/94.6d7ef6f7.js"><link rel="prefetch" href="/xiaokedada/assets/js/95.efa056b8.js"><link rel="prefetch" href="/xiaokedada/assets/js/96.1a9f1737.js"><link rel="prefetch" href="/xiaokedada/assets/js/97.68765c16.js"><link rel="prefetch" href="/xiaokedada/assets/js/98.c65e6193.js"><link rel="prefetch" href="/xiaokedada/assets/js/99.734ab7e3.js"><link rel="prefetch" href="/xiaokedada/assets/js/100.ffb81130.js"><link rel="prefetch" href="/xiaokedada/assets/js/101.52409c86.js"><link rel="prefetch" href="/xiaokedada/assets/js/102.2b0d4b0d.js"><link rel="prefetch" href="/xiaokedada/assets/js/103.ecdf3ea3.js"><link rel="prefetch" href="/xiaokedada/assets/js/104.d991dc2b.js"><link rel="prefetch" href="/xiaokedada/assets/js/105.6a089ee7.js"><link rel="prefetch" href="/xiaokedada/assets/js/106.826b0deb.js"><link rel="prefetch" href="/xiaokedada/assets/js/107.6306b794.js"><link rel="prefetch" href="/xiaokedada/assets/js/108.dc62e716.js"><link rel="prefetch" href="/xiaokedada/assets/js/109.18b18713.js"><link rel="prefetch" href="/xiaokedada/assets/js/110.b5de4946.js"><link rel="prefetch" href="/xiaokedada/assets/js/111.fea6ceb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/112.c1b52e48.js"><link rel="prefetch" href="/xiaokedada/assets/js/113.660b807b.js"><link rel="prefetch" href="/xiaokedada/assets/js/114.37c0dee4.js"><link rel="prefetch" href="/xiaokedada/assets/js/115.22f7ee1d.js"><link rel="prefetch" href="/xiaokedada/assets/js/116.8b3a33cc.js"><link rel="prefetch" href="/xiaokedada/assets/js/117.8f39d356.js">
    <link rel="stylesheet" href="/xiaokedada/assets/css/118.styles.306d23a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/xiaokedada/" class="home-link router-link-active"><!----><span class="site-name">
      XIAOKEDADA
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link router-link-active">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link router-link-active">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>First-Meet Series</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/First-Meet-JSON.html" class="sidebar-link">JSON 必知必会</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Cache.html" class="sidebar-link">Web缓存知多少(缓存机制和数据存储)</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Flux.html" class="sidebar-link">Flux 学习</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html" class="sidebar-link">TypeScript 通识</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Webpack.html" class="sidebar-link">新学 Webpack</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-JavaScript.html" class="sidebar-link">JavaScript 一些奇怪的地方</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-NestJS.html" class="sidebar-link">NestJS 之道</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>All About Vue</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html" class="active sidebar-link">解锁 vue2.0 通信的各种姿势</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html#refs-、-parent-和-children" class="sidebar-link">$refs 、 $parent 和 $children</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html#props、-emit-和-sync" class="sidebar-link">props、$emit 和 .sync</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html#attrs-和-listeners" class="sidebar-link">$attrs 和 $listeners</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html#v-model" class="sidebar-link">v-model</a></li></ul></li><li><a href="/xiaokedada/FirstMeet/How-To-Write-Vue.html" class="sidebar-link">开发中遇到的 vue 的使用记录一下</a></li><li><a href="/xiaokedada/FirstMeet/Vuex-And-V-Model.html" class="sidebar-link">vuex 和 v-model</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>关于我自己学习的 Webpack</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/Webpack-With-Tool.html" class="sidebar-link">Webpack 可视化工具</a></li><li><a href="/xiaokedada/FirstMeet/Webpack-Operating-Principle.html" class="sidebar-link">从打包结果看 webpack 依赖管理</a></li><li><a href="/xiaokedada/FirstMeet/Webpack-JavaScript-Module-History.html" class="sidebar-link">JavaScript 模块化的发展进程</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Type System</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/Type-System-ML.html" class="sidebar-link">数理逻辑理论</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="解锁-vue2-0-通信的各种姿势"><a href="#解锁-vue2-0-通信的各种姿势" aria-hidden="true" class="header-anchor">#</a> 解锁 vue2.0 通信的各种姿势</h1><h2 id="refs-、-parent-和-children"><a href="#refs-、-parent-和-children" aria-hidden="true" class="header-anchor">#</a> $refs 、 $parent 和 $children</h2><p>最开始，<code>ref</code> 是什么？这是 Vue 实现的一个<em>特殊属性</em>，用来给一个元素(就是 HTML 定义的元素)或<strong>子组件</strong>注册的一个<em>引用</em>。这个属性被添加在<strong>父组件</strong>的 <code>$refs</code> 对象中。如果用在一个普通的 DOM 元素，<code>ref</code> 指的就是这个这个元素；如果用在一个子组件上，<code>ref</code> 指的是这个组件的一个 instance。</p><blockquote><p><a href="https://vuejs.org/v2/api/#ref" target="_blank" rel="noopener noreferrer">官方解释<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>从上面的描述中，我们可以得到一些信息：</p><ul><li><code>ref</code> 可以单纯地对一个 DOM 元素或一个组件进行标识。</li><li><code>ref</code> 不是 DOM 的属性，是 Vue 实现的，也不是一个指令</li><li><code>ref</code> 的目的是单纯地让方便快捷地处理 DOM 元素或子组件</li><li><code>$refs</code> 就是父组件上用来保存这些 <code>ref</code> 的一个对象集合</li></ul><p>举个例子：</p><p>父组件 - <code>Parent.vue</code>，使用 <code>ref</code> 标识了一个 <code>h1</code> 标签和一个子组件 <code>child</code>。但父组件还有另一个子组件 <code>another-child</code> 未被 <code>ref</code> 标识。</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>maybeATitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ parentMsg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>clickParent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>I am a FATHER<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myChild<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>another-child</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>another-child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./Child'</span>
<span class="token keyword">import</span> AnotherChild <span class="token keyword">from</span> <span class="token string">'./AnotherChild'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Child<span class="token punctuation">,</span>
    AnotherChild
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      parentMsg<span class="token punctuation">:</span> <span class="token string">'I am a Father'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickParent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$refs'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$refs.myChild'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myChild<span class="token punctuation">.</span>childMsg<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$children'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>我们将 <code>this.$refs</code> 打印出来。结果如下：</p><p><img src="http://p3puylt4n.bkt.clouddn.com/$refs.jpg" alt="this.$refs"></p><p>结果对第一条做出了解释：
(1) <code>ref</code> 是元素或子组件标识，且被添加到父组件的 <code>this.$refs</code> 对象中。
(2) 如果用在一个普通的 DOM 元素，<code>ref</code> 指的就是这个这个元素；如果用在一个子组件上，<code>ref</code> 指的是这个组件的一个 instance。
(3) <strong>如果想访问子组件 <code>child</code> 就可以通过 <code>this.$refs.myChild</code> 访问了</strong>。</p><p>我们先看一下子组件 <code>Child.vue</code> 的内容，只包含一个 <code>button</code> 元素，有一个 click 事件，还有一个 data 属性 <code>childMeg</code>。</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>clickSon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>I am a SON<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      childMsg<span class="token punctuation">:</span> <span class="token string">'I am a Child'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickSon</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$parent.parentMsg'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentMsg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>那么，刚才说可以通过 <code>this.$refs.myChild</code> 访问到子组件 <code>child</code>，这是真的吗？我们展开看一下 <code>this.$refs.myChild</code> 的内容。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/$refs.myChild.jpg" alt="this.$refs.myChild"></p><p>那 <code>$children</code> 是什么？我么在父组件中将 <code>this.$children</code> 打印出来。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/$refs.childrens.jpg" alt></p><p>很明白地看得出来 <code>$children</code> 是当前父组件实例的直接子组件实例的组合(没有确定的顺序关系，也不是响应式的)。</p><p>那么，<code>this.parent</code> 就是当前子组件的实例的直接父组件实例的引用。<strong>Father 有多个 Sons，而 Son 只有一个 Father</strong>。</p><p>所以，通过 <code>ref</code> 、<code>$refs</code> 和 <code>$parent</code> 或者 <code>$children</code> 和 <code>$parent</code> 就可以构建父子组件间的通信。</p><p>比如上面的父组件 <code>Parent.vue</code>，通过 <code>ref</code> 对子组件构成唯一标识，使用 <code>$refs.myChild</code> 对子组件进行数据访问。子组件使用 <code>$refs.parent</code> 对父组件进行数据访问。</p><p>HTML 代码：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--Parent.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myChild<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>JavaScirpt 代码：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Parent.vue</span>
<span class="token function">clickParent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$refs.myChild'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myChild<span class="token punctuation">.</span>childMsg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Child.vue</span>
<span class="token function">clickSon</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this.$parents.parentMsg'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentMsg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="http://p3puylt4n.bkt.clouddn.com/ref-refs-parent.jpg" alt></p><p>需要注意的是，<code>$refs</code> 和 <code>ref</code> 是在初始 <code>render</code> 之后才存在的，并且也不是响应式的。最好不要在模板或者计算属性中使用它，也不能用于数据绑定。</p><blockquote><p><a href="https://github.com/maoxiaoke/vue-communication/tree/master/reftest" target="_blank" rel="noopener noreferrer">Github demo 地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><hr><h2 id="props、-emit-和-sync"><a href="#props、-emit-和-sync" aria-hidden="true" class="header-anchor">#</a> props、$emit 和 .sync</h2><p><code>props</code> 是<em>父组件向子组件</em>传递数据的一种方式，这是一种单向的数据传播方式。使用起来也非常简单：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--Ancestor.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>I am a father of child, and an ancestor of grandson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:ancestor-message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandsonMessage<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>descendant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getMeg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./Child'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Child
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      grandsonMessage<span class="token punctuation">:</span> <span class="token string">'Message from an acenstor'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">getMeg</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
  <span class="token selector">.hello</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> whitesmoke
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父组件 <code>&lt;Ancestor /&gt;</code> 向下传递数据 <code>ancestorMessage</code>（<a href="https://vuejs.org/v2/guide/components-props.html#Prop-Casing-camelCase-vs-kebab-case" target="_blank" rel="noopener noreferrer">为啥不写成 <code>ancestor-message</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）。并使用 <code>v-on</code> 监听了子组件自定义的 <code>descendant</code> 事件。</p><p>下面是子组件的代码：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Child.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span> {{ ancestorMessage }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ancestorMessage<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
      required<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'descendant'</span><span class="token punctuation">,</span> <span class="token string">'hello Wall·E'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
  <span class="token selector">.child</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 2px dotted red<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>214, 206, 206<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这都很简单。需要强调的是，<strong>不要试图在子组件修改 props</strong>，所以试图修改 props 时，可以<a href="https://vuejs.org/v2/guide/components-props.html#One-Way-Data-Flow" target="_blank" rel="noopener noreferrer">使用 data 或 computd 属性拷贝一份 props <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>总结一下：父组件通过 props 向子组件传值，子组件可通过 <code>$emit</code> 一个自定义事件向父组件传值。
另外，通过 <a href="https://vuejs.org/v2/guide/components.html#Sending-Messages-to-Parents-with-Events" target="_blank" rel="noopener noreferrer"><code>$emit</code> 传递消息<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 还有其他的写法，比如：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--Ancestor.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:ancestor-message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandsonMessage<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>descendant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandsonMessage += $event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Child.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>descendant<span class="token punctuation">'</span>, <span class="token punctuation">'</span> Hello Wall·E<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><p>但是，很多情况我们会有 <em>双向绑定 props</em> 的需求。这种情况下，我们可以使用 <a href="https://vuejs.org/v2/guide/components-custom-events.html#sync-Modifier" target="_blank" rel="noopener noreferrer"><code>.sync</code> Modifier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>比如有个例子，父组件传递一个 <code>isFold</code> 判断子组件的内容是否展开，同时子组件也会试图修改 <code>props</code> 的值，来决定自身是否被展开。</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- SubMenu.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav-sub-menu</span> <span class="token attr-name">:is-fold.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultOpen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item-menu</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item-menu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav-sub-menu</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        defaultOpen<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>:is-fold.sync=&quot;defaultOpen&quot;</code> 是一种简写方式，等同于：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav-sub-menu</span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>is-fold</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultOpen<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-on:</span><span class="token namespace">update:</span>is-fold</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultOpen = $event<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子组件的代码：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- ItemMenu.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toggleSubMenu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    isFold<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">toggleSubMenu</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:isFold'</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isFold<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://github.com/maoxiaoke/vue-communication/tree/master/propstest" target="_blank" rel="noopener noreferrer">Github demo 地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><hr><h2 id="attrs-和-listeners"><a href="#attrs-和-listeners" aria-hidden="true" class="header-anchor">#</a> $attrs 和 $listeners</h2><p>在高阶组件中，多层级组件通信可以是通过 <code>props</code> 和 <code>$emit</code> 进行，从而达到跨层级组件通信。</p><blockquote><p>当然，多层级组件通信还可以通过 <code>Vuex</code> 或全局 <code>Event Bus</code> 的方式。</p></blockquote><p>但是，以 <code>props</code> 和 <code>$emit</code> 这种方式进行通信有一个很大的缺点，以下图为例：</p><p><img src="http://p3puylt4n.bkt.clouddn.com/$attrs.jpg" alt></p><p><code>A</code> 是祖先组件，如果需要将信息传递到子孙组件 <code>D</code>，组件 <code>B</code> 和 <code>C</code> 需要作为中转站处理 <code>props</code>，这样会导致组件维护难度加大，<code>props</code> 传递也非常不明朗。</p><p><code>$attrs</code> 和 <code>$listeners</code> 就是为了解决这一问题。两者并不是一类新的组件通信方式，而是 <code>props</code> 和 <code>$emit</code> 通信方式的一种补充。</p><blockquote><p>注意： <code>$attrs</code> 是在 <code>Vue 2.4</code> 才引入的。</p></blockquote><p>祖先组件 A：<code>Ancestor.vue</code>:</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--Ancestor.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>A: I am a father of child, and an ancestor of grandson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandsonMessage<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>descendant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getMeg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./Child'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Child
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      grandsonMessage<span class="token punctuation">:</span> <span class="token string">'Message from an acenstor'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">getMeg</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message from descendant--'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'acenstor $attrs----'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在组件 <code>Ancestor.vue</code>(A) 试图将一个 <code>message</code> 的 <code>props</code> 传递给 子孙组件 <code>GrandgrandSon.vue</code>(D)。而 A 的其他子孙组件 <code>Child.vue</code>(B) 和 <code>GrandSon.vue</code>(C) 并不需要这个 <code>props</code>。同时，A 还监听了 D 传递的 <code>descentdant</code> 事件。</p><p>如何，我们先来看一下 子孙组件 D：<code>GrandgrandSon.vue</code> 的代码：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--GrandgrandSon.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandgrandson<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    D: This is a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'descendant'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sending a msg to ancestor'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'grandgrandson $attrs----'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>祖先组件 A 和子孙组件 D 通信的方式就像普通的父子组件通信的方式一样。</p><p>之后，组件 B 和 C 通过 <code>$attrs</code> 和 <code>$listeners</code> 搭建“数据中转站”。如下：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--Child.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>B: I am a child of A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grand-son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grand-son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> GrandSon <span class="token keyword">from</span> <span class="token string">'./GrandSon'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    GrandSon
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  inheritAttrs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'child $attr----'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'child $listener----'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--GrandSon.vue--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>grandson<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>C: I am a child of B, and a father of D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grandgrand-son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grandgrand-son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> GrandgrandSon <span class="token keyword">from</span> <span class="token string">'./GrandgrandSon'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    GrandgrandSon
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  inheritAttrs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'grandson $attrs----'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'grandson $listens---'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到这两行的代码：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grand-son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grand-son</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grandgrand-son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grandgrand-son</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>架起了沟通的桥梁！</p><p>有一个地方需要说明一下，我们使用了 <code>inheritAttrs: false</code>。这个属性的介绍在<a href="https://vuejs.org/v2/api/#inheritAttrs" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。该属性的默认值是 <code>true</code>，当父组件的传递过来的 <code>props</code> 未被子组件视为 <code>props</code> 时，就会作为子组件根元素普通的 HTML 属性存在。</p><p>比如，该属性为 <code>true</code> 渲染的结果。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/inher01.jpg" alt></p><p>为 <code>false</code> 时：</p><p><img src="http://p3puylt4n.bkt.clouddn.com/inher02.jpg" alt></p><p>最后，看一下项目打印出来的信息。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/console.jpg" alt></p><blockquote><p><a href="https://github.com/maoxiaoke/vue-communication/tree/master/attrText" target="_blank" rel="noopener noreferrer">Github demo 地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><hr><h2 id="v-model"><a href="#v-model" aria-hidden="true" class="header-anchor">#</a> v-model</h2><p><a href="https://vuejs.org/v2/guide/components.html#Using-v-model-on-Components" target="_blank" rel="noopener noreferrer">v-model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 Vue 实现的一种双向绑定。</p><p>比如：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 等价于 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
  <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text = $event.target.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>相对而言是一种比较简单的操作，绑定 <code>&lt;input&gt;</code> 的 <code>name</code> 属性，监听 <code>input</code> 事件。</p><p>如果我们想要对自定义的组件使用 <code>v-model</code> 指令。当用在自定义组件中，比如：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 等价于 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-input</span>
  <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>举个例子：自定义一个 <code>MyInput</code> 组件。</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Input.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>input<span class="token punctuation">'</span>, $event.target.value)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MyInput'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后使用 <code>Vue.component</code> 封装一下：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> Input <span class="token keyword">from</span> <span class="token string">'./Input.vue'</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>name<span class="token punctuation">,</span> Input<span class="token punctuation">)</span>
</code></pre></div><p>可以看到，我们需要做两件事:</p><ul><li>将 <code>&lt;input&gt;</code> 的 <code>value</code> 属性绑定到 <code>props</code> 的 <code>value</code> 中来</li><li><code>$emit</code> 自定义的 event 事件</li></ul><p><a href="https://github.com/maoxiaoke/vue-communication/tree/master/modeltest" target="_blank" rel="noopener noreferrer">Github Demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/maoxiaoke/xiaokedada/edit/master/FirstMeet/First-Meet-Vue-Communication.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">1/3/2019, 5:21:25 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/xiaokedada/FirstMeet/First-Meet-NestJS.html" class="prev">
          NestJS 之道
        </a></span><span class="next"><a href="/xiaokedada/FirstMeet/How-To-Write-Vue.html">
          开发中遇到的 vue 的使用记录一下
        </a> →
      </span></p></div></div></div></div>
    <script src="/xiaokedada/assets/js/83.86b6f686.js" defer></script><script src="/xiaokedada/assets/js/app.51d0a681.js" defer></script>
  </body>
</html>
