<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 通识 | XIAOKEDADA</title>
    <meta name="description" content="Write something useful and funny">
    <link rel="icon" href="/xiaokedada/favicon.png">
    
    <link rel="preload" href="/xiaokedada/assets/css/118.styles.306d23a5.css" as="style"><link rel="preload" href="/xiaokedada/assets/js/app.51d0a681.js" as="script"><link rel="preload" href="/xiaokedada/assets/js/84.e08c1f31.js" as="script"><link rel="prefetch" href="/xiaokedada/assets/js/0.1bd12f53.js"><link rel="prefetch" href="/xiaokedada/assets/js/1.cd946af2.js"><link rel="prefetch" href="/xiaokedada/assets/js/2.ca24feb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/3.5dbaa314.js"><link rel="prefetch" href="/xiaokedada/assets/js/4.65842a86.js"><link rel="prefetch" href="/xiaokedada/assets/js/5.2706d991.js"><link rel="prefetch" href="/xiaokedada/assets/js/6.a9fa93eb.js"><link rel="prefetch" href="/xiaokedada/assets/js/7.07a04857.js"><link rel="prefetch" href="/xiaokedada/assets/js/8.2e73814c.js"><link rel="prefetch" href="/xiaokedada/assets/js/9.9a4ab9ea.js"><link rel="prefetch" href="/xiaokedada/assets/js/10.1579390c.js"><link rel="prefetch" href="/xiaokedada/assets/js/11.86a2e0ac.js"><link rel="prefetch" href="/xiaokedada/assets/js/12.86d07ec2.js"><link rel="prefetch" href="/xiaokedada/assets/js/13.51025cd6.js"><link rel="prefetch" href="/xiaokedada/assets/js/14.723e0304.js"><link rel="prefetch" href="/xiaokedada/assets/js/15.e05c4533.js"><link rel="prefetch" href="/xiaokedada/assets/js/16.4c1175d0.js"><link rel="prefetch" href="/xiaokedada/assets/js/17.6ea7b9a7.js"><link rel="prefetch" href="/xiaokedada/assets/js/18.743491d2.js"><link rel="prefetch" href="/xiaokedada/assets/js/19.c009a8b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/20.4676c2fd.js"><link rel="prefetch" href="/xiaokedada/assets/js/21.ba3174cf.js"><link rel="prefetch" href="/xiaokedada/assets/js/22.68278222.js"><link rel="prefetch" href="/xiaokedada/assets/js/23.c34c06a8.js"><link rel="prefetch" href="/xiaokedada/assets/js/24.d735d321.js"><link rel="prefetch" href="/xiaokedada/assets/js/25.640616f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/26.7712c941.js"><link rel="prefetch" href="/xiaokedada/assets/js/27.183b317a.js"><link rel="prefetch" href="/xiaokedada/assets/js/28.72e53d68.js"><link rel="prefetch" href="/xiaokedada/assets/js/29.906421b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/30.6e4aa06d.js"><link rel="prefetch" href="/xiaokedada/assets/js/31.b1150a91.js"><link rel="prefetch" href="/xiaokedada/assets/js/32.4a8d2fb5.js"><link rel="prefetch" href="/xiaokedada/assets/js/33.697a833c.js"><link rel="prefetch" href="/xiaokedada/assets/js/34.c414b291.js"><link rel="prefetch" href="/xiaokedada/assets/js/35.e321123d.js"><link rel="prefetch" href="/xiaokedada/assets/js/36.07df1a33.js"><link rel="prefetch" href="/xiaokedada/assets/js/37.c2092f91.js"><link rel="prefetch" href="/xiaokedada/assets/js/38.e999f6e6.js"><link rel="prefetch" href="/xiaokedada/assets/js/39.4ad0eec3.js"><link rel="prefetch" href="/xiaokedada/assets/js/40.15c13f22.js"><link rel="prefetch" href="/xiaokedada/assets/js/41.12d9540b.js"><link rel="prefetch" href="/xiaokedada/assets/js/42.048a5c79.js"><link rel="prefetch" href="/xiaokedada/assets/js/43.23a0cac2.js"><link rel="prefetch" href="/xiaokedada/assets/js/44.e552c633.js"><link rel="prefetch" href="/xiaokedada/assets/js/45.347f0a95.js"><link rel="prefetch" href="/xiaokedada/assets/js/46.59bb9a80.js"><link rel="prefetch" href="/xiaokedada/assets/js/47.0a72aee1.js"><link rel="prefetch" href="/xiaokedada/assets/js/48.32c141f4.js"><link rel="prefetch" href="/xiaokedada/assets/js/49.3610d444.js"><link rel="prefetch" href="/xiaokedada/assets/js/50.350e5049.js"><link rel="prefetch" href="/xiaokedada/assets/js/51.d01155cb.js"><link rel="prefetch" href="/xiaokedada/assets/js/52.a5015ced.js"><link rel="prefetch" href="/xiaokedada/assets/js/53.7b73d8b1.js"><link rel="prefetch" href="/xiaokedada/assets/js/54.092ee587.js"><link rel="prefetch" href="/xiaokedada/assets/js/55.9a2f189a.js"><link rel="prefetch" href="/xiaokedada/assets/js/56.27e46b17.js"><link rel="prefetch" href="/xiaokedada/assets/js/57.d080c747.js"><link rel="prefetch" href="/xiaokedada/assets/js/58.2364eb76.js"><link rel="prefetch" href="/xiaokedada/assets/js/59.9deb8139.js"><link rel="prefetch" href="/xiaokedada/assets/js/60.387795af.js"><link rel="prefetch" href="/xiaokedada/assets/js/61.3d0b8582.js"><link rel="prefetch" href="/xiaokedada/assets/js/62.f5702f6b.js"><link rel="prefetch" href="/xiaokedada/assets/js/63.6e8cc274.js"><link rel="prefetch" href="/xiaokedada/assets/js/64.59692959.js"><link rel="prefetch" href="/xiaokedada/assets/js/65.642d2089.js"><link rel="prefetch" href="/xiaokedada/assets/js/66.515778c0.js"><link rel="prefetch" href="/xiaokedada/assets/js/67.09fd142a.js"><link rel="prefetch" href="/xiaokedada/assets/js/68.d2fd2b20.js"><link rel="prefetch" href="/xiaokedada/assets/js/69.54b34dff.js"><link rel="prefetch" href="/xiaokedada/assets/js/70.08cfd9f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/71.8af3cac6.js"><link rel="prefetch" href="/xiaokedada/assets/js/72.8cf1ac97.js"><link rel="prefetch" href="/xiaokedada/assets/js/73.0d2c3de9.js"><link rel="prefetch" href="/xiaokedada/assets/js/74.c5383443.js"><link rel="prefetch" href="/xiaokedada/assets/js/75.b692daea.js"><link rel="prefetch" href="/xiaokedada/assets/js/76.f1760c70.js"><link rel="prefetch" href="/xiaokedada/assets/js/77.024d7794.js"><link rel="prefetch" href="/xiaokedada/assets/js/78.54101d27.js"><link rel="prefetch" href="/xiaokedada/assets/js/79.395e6dea.js"><link rel="prefetch" href="/xiaokedada/assets/js/80.3e659e88.js"><link rel="prefetch" href="/xiaokedada/assets/js/81.31d7c9c5.js"><link rel="prefetch" href="/xiaokedada/assets/js/82.76901e43.js"><link rel="prefetch" href="/xiaokedada/assets/js/83.86b6f686.js"><link rel="prefetch" href="/xiaokedada/assets/js/85.a28700bf.js"><link rel="prefetch" href="/xiaokedada/assets/js/86.57747352.js"><link rel="prefetch" href="/xiaokedada/assets/js/87.6495c6ae.js"><link rel="prefetch" href="/xiaokedada/assets/js/88.fe6c9a90.js"><link rel="prefetch" href="/xiaokedada/assets/js/89.48f45856.js"><link rel="prefetch" href="/xiaokedada/assets/js/90.c2c96eb9.js"><link rel="prefetch" href="/xiaokedada/assets/js/91.466b65d5.js"><link rel="prefetch" href="/xiaokedada/assets/js/92.2c835547.js"><link rel="prefetch" href="/xiaokedada/assets/js/93.d0f32c26.js"><link rel="prefetch" href="/xiaokedada/assets/js/94.6d7ef6f7.js"><link rel="prefetch" href="/xiaokedada/assets/js/95.efa056b8.js"><link rel="prefetch" href="/xiaokedada/assets/js/96.1a9f1737.js"><link rel="prefetch" href="/xiaokedada/assets/js/97.68765c16.js"><link rel="prefetch" href="/xiaokedada/assets/js/98.c65e6193.js"><link rel="prefetch" href="/xiaokedada/assets/js/99.734ab7e3.js"><link rel="prefetch" href="/xiaokedada/assets/js/100.ffb81130.js"><link rel="prefetch" href="/xiaokedada/assets/js/101.52409c86.js"><link rel="prefetch" href="/xiaokedada/assets/js/102.2b0d4b0d.js"><link rel="prefetch" href="/xiaokedada/assets/js/103.ecdf3ea3.js"><link rel="prefetch" href="/xiaokedada/assets/js/104.d991dc2b.js"><link rel="prefetch" href="/xiaokedada/assets/js/105.6a089ee7.js"><link rel="prefetch" href="/xiaokedada/assets/js/106.826b0deb.js"><link rel="prefetch" href="/xiaokedada/assets/js/107.6306b794.js"><link rel="prefetch" href="/xiaokedada/assets/js/108.dc62e716.js"><link rel="prefetch" href="/xiaokedada/assets/js/109.18b18713.js"><link rel="prefetch" href="/xiaokedada/assets/js/110.b5de4946.js"><link rel="prefetch" href="/xiaokedada/assets/js/111.fea6ceb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/112.c1b52e48.js"><link rel="prefetch" href="/xiaokedada/assets/js/113.660b807b.js"><link rel="prefetch" href="/xiaokedada/assets/js/114.37c0dee4.js"><link rel="prefetch" href="/xiaokedada/assets/js/115.22f7ee1d.js"><link rel="prefetch" href="/xiaokedada/assets/js/116.8b3a33cc.js"><link rel="prefetch" href="/xiaokedada/assets/js/117.8f39d356.js">
    <link rel="stylesheet" href="/xiaokedada/assets/css/118.styles.306d23a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/xiaokedada/" class="home-link router-link-active"><!----><span class="site-name">
      XIAOKEDADA
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link router-link-active">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link router-link-active">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>First-Meet Series</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/First-Meet-JSON.html" class="sidebar-link">JSON 必知必会</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Cache.html" class="sidebar-link">Web缓存知多少(缓存机制和数据存储)</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Flux.html" class="sidebar-link">Flux 学习</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html" class="active sidebar-link">TypeScript 通识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#declaration-spaces" class="sidebar-link">Declaration Spaces</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#type-annotation" class="sidebar-link">type Annotation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#inline-type-annotation" class="sidebar-link">Inline Type Annotation</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#generics" class="sidebar-link">Generics</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#index-type" class="sidebar-link">Index Type</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#mapped-types" class="sidebar-link">Mapped Types</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#union-type" class="sidebar-link">Union Type</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#literal-types" class="sidebar-link">Literal Types</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#null-类型" class="sidebar-link">Null 类型</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#type-alias" class="sidebar-link">Type Alias</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#interface" class="sidebar-link">Interface</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#为函数定义类型" class="sidebar-link">为函数定义类型</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#type-assertion" class="sidebar-link">Type Assertion</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#module" class="sidebar-link">module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#模块路径" class="sidebar-link">模块路径</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#引入第三方库" class="sidebar-link">引入第三方库</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#namespace" class="sidebar-link">namespace</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#ambient-declarations" class="sidebar-link">Ambient Declarations</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#引入第三方库-2" class="sidebar-link">引入第三方库</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#declare-global" class="sidebar-link">declare global</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#lib-d-ts" class="sidebar-link">lib.d.ts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#partial" class="sidebar-link">Partial</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#readonly" class="sidebar-link">Readonly</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#required" class="sidebar-link">Required</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#pick" class="sidebar-link">Pick</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#omit" class="sidebar-link">Omit</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#record" class="sidebar-link">Record</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#exclude" class="sidebar-link">Exclude</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#extract" class="sidebar-link">Extract</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#nonnullable" class="sidebar-link">NonNullable</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#tsconfig-json" class="sidebar-link">tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#recap" class="sidebar-link">Recap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#简单类型的写法" class="sidebar-link">简单类型的写法</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#数组的写法" class="sidebar-link">数组的写法</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#简单对象的写法" class="sidebar-link">简单对象的写法</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#无法确定对象的属性的写法" class="sidebar-link">无法确定对象的属性的写法</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#函数的写法" class="sidebar-link">函数的写法</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#字符串约束的写法" class="sidebar-link">字符串约束的写法</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#protips" class="sidebar-link">Protips</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#使用-readonlyarray" class="sidebar-link">使用 ReadonlyArray</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#正确使用泛型" class="sidebar-link">正确使用泛型</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#用-typeof-定义类型" class="sidebar-link">用 typeof 定义类型</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#lint" class="sidebar-link">Lint</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#typescript-编译后的-javascript" class="sidebar-link">TypeScript 编译后的 JavaScript</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#others" class="sidebar-link">Others</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#swap-函数" class="sidebar-link">swap 函数</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#typescript-event" class="sidebar-link">TypeScript &amp; Event</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#使用-type-定义对象和使用-interface-定义的区别" class="sidebar-link">使用 type 定义对象和使用 interface 定义的区别</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#只声明一个泛型" class="sidebar-link">只声明一个泛型</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#没有内置-nullable-类型" class="sidebar-link">没有内置 Nullable 类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/FirstMeet/First-Meet-TypeScript.html#reference" class="sidebar-link">REFERENCE</a></li></ul></li><li><a href="/xiaokedada/FirstMeet/First-Meet-Webpack.html" class="sidebar-link">新学 Webpack</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-JavaScript.html" class="sidebar-link">JavaScript 一些奇怪的地方</a></li><li><a href="/xiaokedada/FirstMeet/First-Meet-NestJS.html" class="sidebar-link">NestJS 之道</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>All About Vue</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/First-Meet-Vue-Communication.html" class="sidebar-link">解锁 vue2.0 通信的各种姿势</a></li><li><a href="/xiaokedada/FirstMeet/How-To-Write-Vue.html" class="sidebar-link">开发中遇到的 vue 的使用记录一下</a></li><li><a href="/xiaokedada/FirstMeet/Vuex-And-V-Model.html" class="sidebar-link">vuex 和 v-model</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>关于我自己学习的 Webpack</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/Webpack-With-Tool.html" class="sidebar-link">Webpack 可视化工具</a></li><li><a href="/xiaokedada/FirstMeet/Webpack-Operating-Principle.html" class="sidebar-link">从打包结果看 webpack 依赖管理</a></li><li><a href="/xiaokedada/FirstMeet/Webpack-JavaScript-Module-History.html" class="sidebar-link">JavaScript 模块化的发展进程</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Type System</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/FirstMeet/Type-System-ML.html" class="sidebar-link">数理逻辑理论</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="typescript-通识"><a href="#typescript-通识" aria-hidden="true" class="header-anchor">#</a> TypeScript 通识</h1><p>TypeScript 是为 JavaScript 提供的静态类型系统。</p><ul><li>类型是什么？</li><li>类型包含什么？</li></ul><p>下面一点值得提到：JavaScript 即是 TypeScript。</p><h2 id="declaration-spaces"><a href="#declaration-spaces" aria-hidden="true" class="header-anchor">#</a> Declaration Spaces</h2><p>在 TypeScript 中有两类声明空间：变量声明空间 和 类型声明空间。</p><ol><li>类型声明空间</li></ol><p>类型声明空间是用来包含「可作为type Annotation (类型注解)」 的容器。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> Bas <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li><code>type</code> 是类型别名。</li><li><code>Foo</code>、<code>Bar</code> 和 <code>Bas</code> 即能用来当做 type Annotation。</li><li>注意，不是说 Interface Bar {} 是合并了多个 type Annotation 的 type Annotation，所以它是一个声明空间。</li></ul><ol start="2"><li>变量声明空间</li></ol><p>变量声明空间是用来包含「可作为变量」的容器。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token number">123</span>
</code></pre></div><ul><li><code>class</code> 既可以作为类型声明空间，又可作为变量声明空间。</li></ul><p>!!理解声明空间的意义在于，类型和变量不能交叉使用，但类型也和变量极为相似。</p><h2 id="type-annotation"><a href="#type-annotation" aria-hidden="true" class="header-anchor">#</a> type Annotation</h2><p>即 :TypeAnnotation 语法，如下。type Annotation 就是类型声明。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> max<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj<span class="token punctuation">:</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="inline-type-annotation"><a href="#inline-type-annotation" aria-hidden="true" class="header-anchor">#</a> Inline Type Annotation</h3><p>和 Interface 不同，有点类似 Interface 的 “语法糖”。可以省去对类型进行命名的麻烦。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> person<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiake'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="generics"><a href="#generics" aria-hidden="true" class="header-anchor">#</a> Generics</h2><p><del>泛型是类型的 “类型”。</del><strong>泛型是 “类型占位符”</strong>。我们用 <code>&lt;&gt;</code> 来告诉你，这是一个泛型。Generics 的意义在于 “为函数参数和函数返回值，类实例成员和类方法” 之间提供约束。</p><p>identity 是函数式编程中常见的一个函数。你给它什么，它就给你吐出什么。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> identity<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre></div><ol><li>泛型用在接口中</li></ol><p>上面的函数我们也可以这样写：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IIdentity</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> identity<span class="token punctuation">:</span> <span class="token function-variable function">IIdentity</span> <span class="token operator">=</span> arg <span class="token operator">=&gt;</span> arg
</code></pre></div><ol start="2"><li>泛型约束</li></ol><p>就好比变量会在编译时才知道具体的值，泛型也是在编译时才知道具体的类型。可是，诸如 number 类型没有 <code>length</code> 属性，这个时候需要进行泛型约束。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ILength</span> <span class="token punctuation">{</span>
  length<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> identityLen<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ILength</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>
</code></pre></div><p>这种情况下，泛型就不能应用于任何类型了。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">identityLen</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// error</span>
<span class="token function">identityLen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">identityLen</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>数组泛型</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> reverseArr<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg<span class="token punctuation">.</span><span class="token function">revrese</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="index-type"><a href="#index-type" aria-hidden="true" class="header-anchor">#</a> Index Type</h2><p>我们通常有这样的场景，我们的项只属于某个接口中定义的声明。比如 pluck 函数：选取对象的子集。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> pluck<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">O</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> names<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>keyof</li></ol><p>keyof，即 index type query operator。对于任何类型 <code>T</code>, <code>key of T</code> 是 <code>T</code> 上已知的公有属性名的联合。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> UPersonProps<span class="token punctuation">:</span> keyof IPerson <span class="token comment">// 'name' | 'age'</span>
</code></pre></div><ol start="2"><li>Indexed Access Operator</li></ol><p>T[K]，即 indexed access operator。这意味着 <code>person['name']</code> 具有类型 <code>IPerson['name']</code>，在例子中就和 string 类型等价。也就是说，只有当返回 <code>T[K]</code> 的结果时，编译器会实例化真实的类型。</p><h2 id="mapped-types"><a href="#mapped-types" aria-hidden="true" class="header-anchor">#</a> Mapped Types</h2><p>Mapped Types，即类型生产类型。这赋予 TypeScript 非常强大的生命力。</p><p><a href="#lib.d.ts">lib.d.ts</a> 提供了一些 Mapped Types 的介绍。</p><h2 id="union-type"><a href="#union-type" aria-hidden="true" class="header-anchor">#</a> Union Type</h2><p>联合类型用 <code>|</code> 作为标记。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">handleCommand</span> <span class="token punctuation">(</span>command<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="literal-types"><a href="#literal-types" aria-hidden="true" class="header-anchor">#</a> Literal Types</h2><p>字符串字面量类型(String Literal Types) 可以为 JavaScript 变量提供一个准确的值。比如用于 <code>switch</code> 的值，比如方向只有 'North'、'East'、'South'、'West' 四个取值。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Inline Type Annotation 的方式</span>
<span class="token keyword">let</span> cardinalDirection<span class="token punctuation">:</span> <span class="token string">'North'</span> <span class="token operator">|</span> <span class="token string">'East'</span> <span class="token operator">|</span> <span class="token string">'South'</span> <span class="token operator">|</span> <span class="token string">'West'</span>
cardinalDirection <span class="token operator">=</span> <span class="token string">'East'</span>

<span class="token comment">// type 的方式</span>
<span class="token keyword">type</span> ICardinalDirection <span class="token operator">=</span> <span class="token string">'North'</span> <span class="token operator">|</span> <span class="token string">'East'</span> <span class="token operator">|</span> <span class="token string">'South'</span> <span class="token operator">|</span> <span class="token string">'West'</span>
<span class="token keyword">const</span> cardinalDirection <span class="token operator">=</span> <span class="token string">'East'</span>
</code></pre></div><p>同理，也有提供 Number 和 Boolean 的 Literal Types 支持。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> num <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">5</span>
</code></pre></div><h2 id="null-类型"><a href="#null-类型" aria-hidden="true" class="header-anchor">#</a> Null 类型</h2><h2 id="type-alias"><a href="#type-alias" aria-hidden="true" class="header-anchor">#</a> Type Alias</h2><p>类型别名用 <code>type</code> 标记。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> TStrOrNum <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
</code></pre></div><h2 id="interface"><a href="#interface" aria-hidden="true" class="header-anchor">#</a> Interface</h2><p>Interface 是为我们的代码或第三方代码定义 “契约”。Interface 能够描述 JavaScript 中对象拥有的各种各样的外形。</p><ol><li>为函数定义契约</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ICounter</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>start<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> counter<span class="token punctuation">:</span> ICounter <span class="token operator">=</span> <span class="token punctuation">(</span>ar<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>为对象方法定义契约</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ICounter</span> <span class="token punctuation">{</span>
  interval<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> counter<span class="token punctuation">:</span> ICounter <span class="token punctuation">{</span>
  interval<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token function">reset</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>可选参数</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ICounter</span> <span class="token punctuation">{</span>
  interval<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>只读属性</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ICounter</span> <span class="token punctuation">{</span>
  readonly interval<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="6"><li>Index Signature</li></ol><p>第一类是 number 类型的索引签名。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ICounter</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> counter<span class="token punctuation">:</span> ICounter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'xiaoke'</span><span class="token punctuation">,</span> <span class="token string">'yuer'</span><span class="token punctuation">]</span>
</code></pre></div><p>第二类是 string 类型的索引签名。明确表明可以使用额外的属性。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>perosn<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person<span class="token punctuation">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">14</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="7"><li>class Types - 为 Class 定义契约</li></ol><p>implements 意味着，你可以在接口中描述方法，在类中实现它(明确地强制一个类去复合某种契约)。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>
  <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> Date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>
  <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> d<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>h<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="8"><li>通过 extends 继承接口</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  color<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  sideLength<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token operator">&lt;</span>Square<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
square<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span>
square<span class="token punctuation">.</span>sideLength <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div><h2 id="为函数定义类型"><a href="#为函数定义类型" aria-hidden="true" class="header-anchor">#</a> 为函数定义类型</h2><ol><li>具名函数</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>匿名函数</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> add<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre></div><ol start="3"><li>类型推断</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> add<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre></div><h2 id="type-assertion"><a href="#type-assertion" aria-hidden="true" class="header-anchor">#</a> Type Assertion</h2><p>TypeScript 允许你覆盖它的推断，并且以自己的方式分析它，这种机制就是 类型断言。</p><ol><li><code>&lt;foo&gt;</code> 的方式</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> foo<span class="token punctuation">:</span> <span class="token builtin">any</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>foo <span class="token comment">// bar 现在的类型是 'string' 了</span>
</code></pre></div><ul><li>但是这种用法在 JSX 的类型断言中，存在歧义。比如 <code>const foo = &lt;string&gt;bar;&lt;/string&gt;;</code></li></ul><ol start="2"><li><code>as</code> 的方式</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> foo<span class="token punctuation">:</span> <span class="token builtin">any</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> foo <span class="token keyword">as</span> <span class="token builtin">string</span>
</code></pre></div><h2 id="module"><a href="#module" aria-hidden="true" class="header-anchor">#</a> module</h2><p>默认情况下，在一个 <code>.ts</code> 文件中的代码都属于全局命名空间。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// test.ts</span>
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token number">123</span>
</code></pre></div><p>但任何包含 top-level import 和 export 的文件都会当做一个模块(这一点 TypeScript 和 ECMAScipt 2015 一致)。</p><h3 id="模块路径"><a href="#模块路径" aria-hidden="true" class="header-anchor">#</a> 模块路径</h3><p>和往常一样，TypeScript 提供相对模块路径和动态模块路径两种引入方式，采用 place 的查找策略。</p><ul><li>如果 <code>place</code> 是一个文件，nice。</li><li>否则，如果 <code>place</code> 是一个文件夹，并且存在 <code>index.ts</code> 文件，nice。</li><li>否则，如果 <code>place</code> 是一个文件夹，并且存在一个 <code>package.json</code> 文件，并且该文件指定了类型文件的存在(通过 <code>typing</code> 字段)，nice。</li><li>否则，如果 <code>place</code> 是一个文件夹，并且存在一个 <code>package.json</code> 文件，并且该文件指定了入口(main 字段)文件的存在，也是 ok 的。</li></ul><h3 id="引入第三方库"><a href="#引入第三方库" aria-hidden="true" class="header-anchor">#</a> 引入第三方库</h3><ol><li>第三方库提供 TypeScript 支持</li></ol><p>从上面可以了解到，如果引入的第三方库提供了 TypeScript 支持(通过查看其目录下的 <code>package.json</code> 文件的 <code>typing</code> 字段)，我们就想往常一样引入就可以了。</p><p>比如，<code>vuex-class</code> 库，其 <code>package.json</code> 的内容有。</p><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;typings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.d.ts&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>使用 @type</li></ol><p>有些库本身不提供 TypeScript 支持。因此出现了这样的一个叫 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener noreferrer">DefinitelyTyped<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的库，为常见的库提供类型定义。</p><p>比如，引入 <code>ramda</code> 函数库。</p><div class="language-bash extra-class"><pre class="language-bash"><code>-<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span> -s ramda
-<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span> -s @types/ramda
</code></pre></div><ol start="3"><li>为自定义的库写声明文件</li></ol><p>无可避免的，会有一些无人维护其类型定义的库。比如一个叫 <code>foo</code> 的模块。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// globals.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'foo'</span> <span class="token punctuation">{</span>
  <span class="token comment">// some variable declarations</span>
  <span class="token keyword">export</span> <span class="token keyword">var</span> bar<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当然，最便捷的就是。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// globals.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'foo'</span>
</code></pre></div><p>如何高质量的书写类型定义，官方文档提供了<a href="http://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html" target="_blank" rel="noopener noreferrer">详细的介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="namespace"><a href="#namespace" aria-hidden="true" class="header-anchor">#</a> namespace</h2><p>额，下面的代码在 JavaScript 是种普遍的方式。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>obj <span class="token operator">||</span> <span class="token punctuation">(</span>obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们可以通过 <code>obj.foo</code> 获取到 <code>foo</code> 属性。现在，我们通常通过 <code>export</code> 和 <code>import</code> 来实现这点。但 TypeScript 通过 namespace 来支持这种方式。</p><p>namespace 有点类似于一个全局对象。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Utility.ts</span>
<span class="token keyword">namespace</span> Utility <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// usage.ts</span>
<span class="token comment">/// &lt;reference path=&quot;Utility.ts&quot; /&gt;</span>
Utility<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>推荐使用一个 namespace 模块，用来快速移植旧的代码</li><li>模块里不要使用命名空间</li></ul><h2 id="ambient-declarations"><a href="#ambient-declarations" aria-hidden="true" class="header-anchor">#</a> Ambient Declarations</h2><p>在 TypeScript 中，是无法使用未被声明的变量。Ambient Declarations(环境声明) 允许你安全地使用第三方库。</p><p>通常，会使用 <code>.d.ts</code> 后缀的文件来保存这些声明(比如，命名为 <code>global.d.ts</code> 或 <code>vendor.d.ts</code>)。如果一个文件的扩展名为 <code>.d.ts</code>，这意味着每个 top-level 的声明必须以 <code>declare</code> 关键字作为前缀。</p><p><code>declare</code> 关键字来告诉 TypeScript，我们正在表述一个在其他地方已经存在的代码(模块或变量)。</p><h2 id="引入第三方库-2"><a href="#引入第三方库-2" aria-hidden="true" class="header-anchor">#</a> 引入第三方库</h2><p>我们来结合 <code>declare</code> 和 <code>module</code> 或 <code>namespace</code> 来对第三方库进行声明。</p><ol><li>声明一个全局模块</li></ol><p>这可以用来解决查找模块路径的问题</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'@napos/melody-os'</span>
</code></pre></div><ol start="2"><li>lib.d.ts</li></ol><p>安装 TypeScript 是，会顺带 <code>lib.d.ts</code> 等声明文件。此文件包含了 JavaScript 运行时以及 DOM 中存在各种常见的环境声明。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>上述代码运行正常，就是因为 <code>lib.d.ts</code> 为所有 JavaScript 对象定义 <code>toString()</code> 方法。</p><p><code>lib.d.ts</code> 的内容主要有一些变量声明。示例：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 全局变量 window 被定义为</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token punctuation">:</span> Window
<span class="token comment">// Window 接口被定义为</span>
<span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token keyword">extends</span> <span class="token class-name">EventTarget</span><span class="token punctuation">,</span> WindowTimers<span class="token punctuation">,</span> WindowSessionStorage<span class="token punctuation">,</span> WindowLocalStorage<span class="token punctuation">,</span> WindowConsole<span class="token punctuation">,</span> GlobalEventHandlers<span class="token punctuation">,</span> IDBEnvironment<span class="token punctuation">,</span> WindowBase64 <span class="token punctuation">{</span>
  animationStartTime<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  applicationCache<span class="token punctuation">:</span> ApplicationCache<span class="token punctuation">;</span>
  clientInformation<span class="token punctuation">:</span> Navigator<span class="token punctuation">;</span>
  closed<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  crypto<span class="token punctuation">:</span> Crypto<span class="token punctuation">;</span>
  <span class="token comment">// so on and so forth...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Declaration Merging</li></ol><p>在 TypeScript 中，接口是开放的。这意味着当你想使用不存在的成员时，你仅仅是需要添加它们至 lib.d.ts 中的接口声明中，即 Declaration Merging(声明合并)。</p><p>推荐创建一个 <code>globals.d.ts</code> 的文件。举例。</p><p>(1) 添加至 Window 接口</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
  $<span class="token constant">ENV</span><span class="token punctuation">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>(2) 添加至 Math 接口</p><p>Math 在 <code>lib.d.ts</code> 声明如下：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 全局变量 Math 被定义为</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> Math<span class="token punctuation">:</span> Math
<span class="token comment">// 接口 Math 被定义为</span>
<span class="token keyword">interface</span> <span class="token class-name">Math</span> <span class="token punctuation">{</span>
  <span class="token constant">E</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token constant">LN10</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// others ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过 Declaration Merging 在 Math 全局变量上添加你需要的属性，直接把它添加至 Math 的全局接口上即可。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Math</span> <span class="token punctuation">{</span>
  <span class="token function">seedrandom</span><span class="token punctuation">(</span>seed<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="declare-global"><a href="#declare-global" aria-hidden="true" class="header-anchor">#</a> declare global</h2><p>前文中提到过: 任何包含 top-level import 和 export 的文件都会当做一个模块。因此，在模块内部添加声明到全局作用域可以使用 <code>declare global</code>。<a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... still no implementation ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">toObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token builtin">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toObservable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="lib-d-ts"><a href="#lib-d-ts" aria-hidden="true" class="header-anchor">#</a> lib.d.ts</h2><p>我们可能好奇，为啥 JavaScript 官方的一些 api，不需要我们写类型声明。这是因为 TypeScript 已经为我们定义好了。所有的内容都放在 <a href="https://github.com/Microsoft/TypeScript/tree/master/lib" target="_blank" rel="noopener noreferrer">lib.d.ts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中了。</p><p>我们首先看一下 <a href="https://github.com/Microsoft/TypeScript/blob/master/lib/lib.es2015.core.d.ts" target="_blank" rel="noopener noreferrer">lib.es2015.core.d.ts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这个文件包含了 ES6 的一些核心 api 的声明。</p><p>举例说明：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Math</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
  * Returns the number of leading zero bits in the 32-bit binary representation of a number.
  * @param x A numeric expression.
  */</span>
  <span class="token function">clz32</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">/**
    * Returns the result of 32-bit multiplication of two numbers.
    * @param x First number
    * @param y Second number
    */</span>
  <span class="token function">imul</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来的重点是看一下 TypeScript 官方提供的一些工具泛型(即，Mapped Types) 或 类型。</p><h3 id="partial"><a href="#partial" aria-hidden="true" class="header-anchor">#</a> Partial</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里有三个关键点：</p><ul><li><code>in</code> 关键字</li><li><code>keyof</code> 关键字，即 index type query operator</li><li><code>T[P]</code>，即 indexed access operator</li></ul><p>那么，这个 Mapped Types 的意思就很明确了：使类型 <code>T</code> 中的属性变为可选(optional)。用法如下：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> TPersonPartial <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>IPerson<span class="token operator">&gt;</span>

<span class="token keyword">const</span> personPartial<span class="token punctuation">:</span> TPersonPartial <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span>  <span class="token comment">// 不会报错</span>
<span class="token punctuation">}</span>
</code></pre></div><p>举例： 比如用在 JavaScript 的 merge 操作</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token punctuation">(</span>person<span class="token punctuation">:</span> IPerson<span class="token punctuation">,</span> patch<span class="token punctuation">:</span> Partial<span class="token operator">&lt;</span>IPerson<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>person<span class="token punctuation">,</span> <span class="token operator">...</span>patch <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="readonly"><a href="#readonly" aria-hidden="true" class="header-anchor">#</a> Readonly</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    readonly <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>同理，很好理解：使类型 <code>T</code> 中的属性变为可选(readonly)。</p><h3 id="required"><a href="#required" aria-hidden="true" class="header-anchor">#</a> Required</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>比较有意思的点在于 <code>-?</code> 标记，作用和 <code>?</code> 相反：使类型 <code>T</code> 中的属性变为必选(required)。</p><h3 id="pick"><a href="#pick" aria-hidden="true" class="header-anchor">#</a> Pick</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>keyof</code> 配合 <code>extends</code> 的效果就是：从 <code>T</code> 中取出一系列 <code>K</code> 的属性。用法如下：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> TPersonPartial <span class="token operator">=</span> Pick<span class="token operator">&lt;</span>IPerson<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> personPartial<span class="token punctuation">:</span> TPersonPartial <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="omit"><a href="#omit" aria-hidden="true" class="header-anchor">#</a> Omit</h3><p>和 <code>Pick</code> 相反的操作，是 <code>Omit</code>。自定义 <code>Omit</code> 类型如下。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span>keyof <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>是的，我们用了 <code>Pick</code> 和 <code>Exclude</code> 类型来生成我们的 <code>Omit</code> 类型。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> TPersonPartial <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>IPerson<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> personPartial<span class="token punctuation">:</span> TPersonPartial <span class="token operator">=</span> <span class="token punctuation">{</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="record"><a href="#record" aria-hidden="true" class="header-anchor">#</a> Record</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>keyof any</code> 有点意思，是什么呢？</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> TWhatIsTheFxxk <span class="token operator">=</span> keyof <span class="token builtin">any</span>  <span class="token comment">// string | number | symbol</span>
</code></pre></div><p>所以含义应该是：将一系列属性 <code>K</code> 的属性值变成类型 <code>T</code>。都用法如下。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> TPerson <span class="token operator">=</span> Record<span class="token operator">&lt;</span><span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token string">'18'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>举例：在 JavaScript 枚举及其对应的映射</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> TOperatingCode <span class="token operator">=</span> <span class="token string">'EDIT'</span> <span class="token operator">|</span> <span class="token string">'ADD'</span>
<span class="token keyword">interface</span> <span class="token class-name">IOperatingDesc</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  func<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> operationMap<span class="token punctuation">:</span> Record<span class="token operator">&lt;</span>TOperatingCode<span class="token punctuation">,</span> IOperatingDesc<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">EDIT</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'编辑'</span><span class="token punctuation">,</span>
    func<span class="token punctuation">:</span> edit
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">ADD</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'添加'</span><span class="token punctuation">,</span>
    func<span class="token punctuation">:</span> add
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">edit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="exclude"><a href="#exclude" aria-hidden="true" class="header-anchor">#</a> Exclude</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> never <span class="token punctuation">:</span> <span class="token constant">T</span>
</code></pre></div><p>这里有个<a href="http://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html" target="_blank" rel="noopener noreferrer">新语法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：<code>T extends U ? never : T</code>，这个好像是三元运算符。举例：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token constant">X</span> <span class="token punctuation">:</span> <span class="token constant">Y</span>
</code></pre></div><p>如果 <code>T</code> is assignable to <code>U</code> 的话，就会返回 <code>X</code>，否则 <code>Y</code>。</p><p>那 <code>Exclude</code> 类型的含义是：从 <code>T</code> 中剔除那些可以赋值给 <code>U</code> 的类型。</p><h3 id="extract"><a href="#extract" aria-hidden="true" class="header-anchor">#</a> Extract</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token punctuation">:</span> never
</code></pre></div><p>和 <code>Exclude</code> 类型类型相反：从 <code>T</code> 中抽取那些可以赋值给 <code>U</code> 的类型。</p><h3 id="nonnullable"><a href="#nonnullable" aria-hidden="true" class="header-anchor">#</a> NonNullable</h3><p>定义在源文件 <a href="https://github.com/Microsoft/TypeScript/blob/master/src/lib/es5.d.ts" target="_blank" rel="noopener noreferrer">lib.es5.d<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">null</span> <span class="token operator">|</span> undefined <span class="token operator">?</span> never <span class="token punctuation">:</span> <span class="token constant">T</span>
</code></pre></div><p>从 <code>T</code> 中剔除那些可以赋值给 <code>null</code> 和 <code>undefined</code> 类型。</p><h2 id="tsconfig-json"><a href="#tsconfig-json" aria-hidden="true" class="header-anchor">#</a> tsconfig.json</h2><p>tsconfig.json 文件指定用来编译这个项目的根文件和编译选项。编译选项可以参考<a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">Compiler Options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h2 id="recap"><a href="#recap" aria-hidden="true" class="header-anchor">#</a> Recap</h2><h3 id="简单类型的写法"><a href="#简单类型的写法" aria-hidden="true" class="header-anchor">#</a> 简单类型的写法</h3><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> a<span class="token punctuation">:</span> String <span class="token operator">=</span> <span class="token string">'xiaoke'</span>
<span class="token keyword">const</span> b<span class="token punctuation">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token keyword">const</span> c<span class="token punctuation">:</span> Number <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">const</span> d<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">const</span> e<span class="token punctuation">:</span> undefined <span class="token operator">=</span> undefined
</code></pre></div><h3 id="数组的写法"><a href="#数组的写法" aria-hidden="true" class="header-anchor">#</a> 数组的写法</h3><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 方式一：类型 + []</span>
<span class="token keyword">const</span> arr<span class="token punctuation">:</span> Number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 方式二：数组泛型</span>
<span class="token keyword">const</span> arr<span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Number<span class="token operator">&gt;=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 方式三：用索引签名</span>
<span class="token keyword">interface</span> <span class="token class-name">NumArr</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> arr<span class="token punctuation">:</span> NumArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// 方式四：Inline Type Annotation</span>
<span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="简单对象的写法"><a href="#简单对象的写法" aria-hidden="true" class="header-anchor">#</a> 简单对象的写法</h3><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 方式一：interface 的方式</span>
<span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person<span class="token punctuation">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式二：Inline Type Annotation</span>
<span class="token keyword">let</span> person<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="无法确定对象的属性的写法"><a href="#无法确定对象的属性的写法" aria-hidden="true" class="header-anchor">#</a> 无法确定对象的属性的写法</h3><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 利用索引签名</span>
<span class="token keyword">interface</span> <span class="token class-name">IPerson</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数的写法"><a href="#函数的写法" aria-hidden="true" class="header-anchor">#</a> 函数的写法</h3><ol><li>函数声明</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 函数声明的方式</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

</code></pre></div><ol start="2"><li>函数表达式</li></ol><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 方式一：函数表达式方式</span>
<span class="token keyword">const</span> sum<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y

<span class="token comment">// 方式二：interface 的方式</span>
<span class="token keyword">interface</span> <span class="token class-name">ISum</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> sum<span class="token punctuation">:</span> <span class="token function-variable function">ISum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
</code></pre></div><h3 id="字符串约束的写法"><a href="#字符串约束的写法" aria-hidden="true" class="header-anchor">#</a> 字符串约束的写法</h3><p>有时候，我们可能需要约束某些变量只能取固定的几个值。比如创建一张卡片，我们约束卡片的类型只有 “新建”(new) 和 “更新”(update)。我们可以这样写。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 利用字面量类型</span>
<span class="token keyword">type</span> TCardType <span class="token operator">=</span> <span class="token string">'new'</span> <span class="token operator">|</span> <span class="token string">'update'</span>
<span class="token keyword">const</span> card<span class="token punctuation">:</span> TCardType <span class="token operator">=</span> <span class="token string">'new'</span>

<span class="token comment">// 或者 enum 方式(这类方式指的再考虑下)</span>
<span class="token keyword">enum</span> ECardType <span class="token operator">=</span> <span class="token punctuation">{</span>
  New<span class="token punctuation">:</span> <span class="token string">'new'</span><span class="token punctuation">;</span>
  Update<span class="token punctuation">:</span> <span class="token string">'update'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> card<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> ECardType<span class="token punctuation">.</span>New
</code></pre></div><p>同理，可以推广到其他类型。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> INum <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">5</span>
<span class="token keyword">const</span> num<span class="token punctuation">:</span> INum <span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><h2 id="protips"><a href="#protips" aria-hidden="true" class="header-anchor">#</a> Protips</h2><h3 id="使用-readonlyarray"><a href="#使用-readonlyarray" aria-hidden="true" class="header-anchor">#</a> 使用 ReadonlyArray</h3><h3 id="正确使用泛型"><a href="#正确使用泛型" aria-hidden="true" class="header-anchor">#</a> 正确使用泛型</h3><p>泛型和 any 类型有那么点相似。在使用泛型的时候，首先应该思考的是：想用泛型提供怎样的约束。</p><p>比如一个函数：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> foo<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span>

<span class="token comment">// 和下面相比安全性似乎并没有提升</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span>
</code></pre></div><p>即，在参数和返回值之间提供约束。</p><h3 id="用-typeof-定义类型"><a href="#用-typeof-定义类型" aria-hidden="true" class="header-anchor">#</a> 用 typeof 定义类型</h3><p>在上面的很多例子中，我们都是先定义了类型，再定义变量。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person<span class="token punctuation">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><p>有一种更为直接的方法是利用 <code>typeof</code>。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'xiaoke'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> TPerson <span class="token operator">=</span> <span class="token keyword">typeof</span> person
</code></pre></div><h3 id="lint"><a href="#lint" aria-hidden="true" class="header-anchor">#</a> Lint</h3><p>目前 TypeScript Lint 的方案有两种。</p><ol><li><p>使用 <a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener noreferrer">TSLint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p>使用 <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> + <a href="https://github.com/typescript-eslint/typescript-eslint" target="_blank" rel="noopener noreferrer">typescript-eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol><p>智能提示是 TypeScript 一个非常惹人喜爱的一点。对于 Visual Code，可以在 IDE 中集成 ESLint 和 TSLint 来提供智能提示的功能。分别安装 <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">ESLint extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://marketplace.visualstudio.com/items?itemName=eg2.tslint" target="_blank" rel="noopener noreferrer">TSLint extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>注意，ESLint 默认是不会检查 <code>.ts</code> 文件的，因此需要在 <code>setting.json</code> 文件中添加对 TypeScript 的支持。可以详细阅读其 readme。</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;eslint.validate&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;typescript&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而对于 TSLint，即装即用。</p><p>Q: VSCode 提供的 TSLint extension 并不支持 <code>vue</code>。对于常年使用 <code>vue</code> 的用户，可以考虑使用 <a href="https://marketplace.visualstudio.com/items?itemName=prograhammer.tslint-vue" target="_blank" rel="noopener noreferrer">TSLint Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。这个 extension 拷贝了官方的 TSLint extension，并提供了对 <code>.vue</code> 文件的支持。<a href="https://github.com/prograhammer/vscode-tslint-vue" target="_blank" rel="noopener noreferrer">仓库地址 vscode-tslint-vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。使用方式是 disable 掉 TSLint extension，启用 TSLint Vue 即可。</p><h3 id="typescript-编译后的-javascript"><a href="#typescript-编译后的-javascript" aria-hidden="true" class="header-anchor">#</a> TypeScript 编译后的 JavaScript</h3><p>如果你想知道你的 TypeScript 最终编译成什么样的 JavaScript 代码，有以下方法:</p><ol><li>通过 tsc 命令</li></ol><p>首先，需要通过 <code>npm</code> 安装 <code>TypeScript</code>。</p><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre></div><p>然后，编写你的 <code>.ts</code> 文件并执行命令：</p><div class="language-bash extra-class"><pre class="language-bash"><code>tsc yourfile.ts
</code></pre></div><ol start="2"><li>直接通过官网的 PlayGround</li></ol><p>官方提供了 <a href="http://www.typescriptlang.org/play/index.html" target="_blank" rel="noopener noreferrer">PlayGround<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可直接查看编译后的代码。</p><h2 id="others"><a href="#others" aria-hidden="true" class="header-anchor">#</a> Others</h2><h3 id="swap-函数"><a href="#swap-函数" aria-hidden="true" class="header-anchor">#</a> swap 函数</h3><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> swap<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>tuple<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="typescript-event"><a href="#typescript-event" aria-hidden="true" class="header-anchor">#</a> TypeScript &amp; Event</h3><p>在开发 web 应用的时候，我们免不了和原生 Event 对象打交道。比如有一个 Click 事件，可以这样写：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">handleClick</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> Event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是可以将 Event 具体化，即它到底是 MouseEvent 呢，还是 TouchEvent 或者是 InputEvent。<em>大多数</em> 用户行为产生的事件都继承 <a href="https://developer.mozilla.org/en-US/docs/Web/API/UIEvent" target="_blank" rel="noopener noreferrer">UIEvent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，而 UIEvent 又继承于 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event" target="_blank" rel="noopener noreferrer">Event<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。因此我们又可以具体化：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">handleClick</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-index'</span><span class="token punctuation">)</span> <span class="token comment">// Object is possibly 'null'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后，TypeScript 接着告诉你错误。难受。那看一下 <code>target</code> 的类型声明吧。在 <a href>lib.dom.d.ts</a> 这个文件中有：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  readonly target<span class="token punctuation">:</span> EventTarget <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>e.target</code> 可能会是 <code>null</code>。好吧，再查一下 mdn 吧，在 <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，就是说 <code>e.target</code> 不一定是 Element。那我们就守卫一下：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">handleClick</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token keyword">instanceof</span> <span class="token class-name">HTMLSpanElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可参考</p><ul><li><p><a href="https://fettblog.eu/typescript-react/events/" target="_blank" rel="noopener noreferrer">TypeScript and React: Events<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p><a href="https://stackoverflow.com/questions/28900077/why-is-event-target-not-element-in-typescript" target="_blank" rel="noopener noreferrer">Why is Event.target not Element in Typescript?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul><h3 id="使用-type-定义对象和使用-interface-定义的区别"><a href="#使用-type-定义对象和使用-interface-定义的区别" aria-hidden="true" class="header-anchor">#</a> 使用 type 定义对象和使用 interface 定义的区别</h3><p><img src="https://github.com/maoxiaoke/xiaokedada/blob/master/assets/type-ts.jpeg?raw=true" alt="type-ts"></p><p>这不用多介绍了，可以查看 <a href="https://stackoverflow.com/questions/37233735/typescript-interfaces-vs-types" target="_blank" rel="noopener noreferrer">Stack Overflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的回答。</p><h3 id="只声明一个泛型"><a href="#只声明一个泛型" aria-hidden="true" class="header-anchor">#</a> 只声明一个泛型</h3><p>在实际开发中，会遇到这样的一个例子：可以为类型传递多个泛型，但是其中某些泛型是可以通过类型推断出来的。举例</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> tryCatch<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
  service<span class="token punctuation">:</span> <span class="token punctuation">(</span>args<span class="token punctuation">:</span><span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  args<span class="token punctuation">:</span> <span class="token constant">R</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">await</span> <span class="token function">service</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>假设其中 T 和 R 的类型都可以推断出来，而 R 并不能。也无法提供一个可选的 Optional 泛型。目前的解决方法是通过 curry 的方式。</p><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">function</span> tryCatch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>S</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">() </span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>service<span class="token punctuation">:</span> <span class="token punctuation">(</span>args<span class="token punctuation">:</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">, args: R): Promise&lt;[T, S]&gt; =&gt; </span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">await</span> <span class="token function">service</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token plain-text">;
}
</span></code></pre></div><p>其他参考链接：</p><ol><li><a href="https://stackoverflow.com/questions/47596157/inferred-type-in-generic-with-multiple-type-parameters" target="_blank" rel="noopener noreferrer">Inferred type in generic with multiple type parameters<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://github.com/Microsoft/TypeScript/issues/14400" target="_blank" rel="noopener noreferrer">Optional Generic Type Inference<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://github.com/microsoft/TypeScript/issues/16597" target="_blank" rel="noopener noreferrer">Allow specifying only a subset of generic type parameters explicitly instead of all vs none<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol><h3 id="没有内置-nullable-类型"><a href="#没有内置-nullable-类型" aria-hidden="true" class="header-anchor">#</a> 没有内置 Nullable 类型</h3><p>TypeScript 官方提供了一个 <code>NonNullable</code> 类型，但是并没有提供一个 <code>Nullable</code> 类型。这里简要实现下：</p><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> Nullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><p>关于为什么不提供 <code>Nullable</code> 类型，大概有几点理由：</p><ol><li>如何定义 <code>Nullable</code>？是 <code>T | null</code> or <code>T | undefined</code> or <code>T | null | undefined</code>。</li></ol><p>既然存在争议，不如交给开发者来实现。</p><p>还有 issue 提出 <code>T?</code> 这种方式，也是比较奇怪的设计。</p><p>参考链接：</p><ol><li>[[Request for feedback] Nullable types, <code>null</code> and <code>undefined</code>(https://github.com/microsoft/TypeScript/issues/7426)</li><li><a href="https://github.com/microsoft/TypeScript/pull/7140" target="_blank" rel="noopener noreferrer">Non-nullable types <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol><h2 id="reference"><a href="#reference" aria-hidden="true" class="header-anchor">#</a> REFERENCE</h2><ol><li><p><a href="https://legacy.gitbook.com/book/basarat/typescript/details" target="_blank" rel="noopener noreferrer">TypeScript Deep Dive<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 一本比较通俗的 JavaScript</p></li><li><p><a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener noreferrer">深入理解 TypeScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 上面的中文译本</p></li><li><p><a href="https://codeburst.io/vuex-and-typescript-3427ba78cfa8" target="_blank" rel="noopener noreferrer">Vuex and Typescript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将 TypeScript 和 Vuex 结合的文章</p></li><li><p><a href="https://github.com/eladcandroid/typescript-vuex-example" target="_blank" rel="noopener noreferrer">VueJS Typescript with Vuex using Vue-CLI 3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 引用 2 的代码实现</p></li><li><p><a href="https://ts.xcatliu.com/engineering/lint.html" target="_blank" rel="noopener noreferrer">代码检查<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Lint 的一些内容</p></li><li><p><a href="https://zhuanlan.zhihu.com/p/64423022" target="_blank" rel="noopener noreferrer">巧用 Typescript (二)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/maoxiaoke/xiaokedada/edit/master/FirstMeet/First-Meet-TypeScript.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">11/17/2019, 11:34:52 AM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/xiaokedada/FirstMeet/First-Meet-Flux.html" class="prev">
          Flux 学习
        </a></span><span class="next"><a href="/xiaokedada/FirstMeet/First-Meet-Webpack.html">
          新学 Webpack
        </a> →
      </span></p></div></div></div></div>
    <script src="/xiaokedada/assets/js/84.e08c1f31.js" defer></script><script src="/xiaokedada/assets/js/app.51d0a681.js" defer></script>
  </body>
</html>
