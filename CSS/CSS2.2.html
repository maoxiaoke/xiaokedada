<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS 2.2 阅读手册 | XIAOKEDADA</title>
    <meta name="description" content="Write something useful and funny">
    <link rel="icon" href="/xiaokedada/favicon.png">
    
    <link rel="preload" href="/xiaokedada/assets/css/118.styles.306d23a5.css" as="style"><link rel="preload" href="/xiaokedada/assets/js/app.51d0a681.js" as="script"><link rel="preload" href="/xiaokedada/assets/js/102.2b0d4b0d.js" as="script"><link rel="prefetch" href="/xiaokedada/assets/js/0.1bd12f53.js"><link rel="prefetch" href="/xiaokedada/assets/js/1.cd946af2.js"><link rel="prefetch" href="/xiaokedada/assets/js/2.ca24feb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/3.5dbaa314.js"><link rel="prefetch" href="/xiaokedada/assets/js/4.65842a86.js"><link rel="prefetch" href="/xiaokedada/assets/js/5.2706d991.js"><link rel="prefetch" href="/xiaokedada/assets/js/6.a9fa93eb.js"><link rel="prefetch" href="/xiaokedada/assets/js/7.07a04857.js"><link rel="prefetch" href="/xiaokedada/assets/js/8.2e73814c.js"><link rel="prefetch" href="/xiaokedada/assets/js/9.9a4ab9ea.js"><link rel="prefetch" href="/xiaokedada/assets/js/10.1579390c.js"><link rel="prefetch" href="/xiaokedada/assets/js/11.86a2e0ac.js"><link rel="prefetch" href="/xiaokedada/assets/js/12.86d07ec2.js"><link rel="prefetch" href="/xiaokedada/assets/js/13.51025cd6.js"><link rel="prefetch" href="/xiaokedada/assets/js/14.723e0304.js"><link rel="prefetch" href="/xiaokedada/assets/js/15.e05c4533.js"><link rel="prefetch" href="/xiaokedada/assets/js/16.4c1175d0.js"><link rel="prefetch" href="/xiaokedada/assets/js/17.6ea7b9a7.js"><link rel="prefetch" href="/xiaokedada/assets/js/18.743491d2.js"><link rel="prefetch" href="/xiaokedada/assets/js/19.c009a8b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/20.4676c2fd.js"><link rel="prefetch" href="/xiaokedada/assets/js/21.ba3174cf.js"><link rel="prefetch" href="/xiaokedada/assets/js/22.68278222.js"><link rel="prefetch" href="/xiaokedada/assets/js/23.c34c06a8.js"><link rel="prefetch" href="/xiaokedada/assets/js/24.d735d321.js"><link rel="prefetch" href="/xiaokedada/assets/js/25.640616f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/26.7712c941.js"><link rel="prefetch" href="/xiaokedada/assets/js/27.183b317a.js"><link rel="prefetch" href="/xiaokedada/assets/js/28.72e53d68.js"><link rel="prefetch" href="/xiaokedada/assets/js/29.906421b2.js"><link rel="prefetch" href="/xiaokedada/assets/js/30.6e4aa06d.js"><link rel="prefetch" href="/xiaokedada/assets/js/31.b1150a91.js"><link rel="prefetch" href="/xiaokedada/assets/js/32.4a8d2fb5.js"><link rel="prefetch" href="/xiaokedada/assets/js/33.697a833c.js"><link rel="prefetch" href="/xiaokedada/assets/js/34.c414b291.js"><link rel="prefetch" href="/xiaokedada/assets/js/35.e321123d.js"><link rel="prefetch" href="/xiaokedada/assets/js/36.07df1a33.js"><link rel="prefetch" href="/xiaokedada/assets/js/37.c2092f91.js"><link rel="prefetch" href="/xiaokedada/assets/js/38.e999f6e6.js"><link rel="prefetch" href="/xiaokedada/assets/js/39.4ad0eec3.js"><link rel="prefetch" href="/xiaokedada/assets/js/40.15c13f22.js"><link rel="prefetch" href="/xiaokedada/assets/js/41.12d9540b.js"><link rel="prefetch" href="/xiaokedada/assets/js/42.048a5c79.js"><link rel="prefetch" href="/xiaokedada/assets/js/43.23a0cac2.js"><link rel="prefetch" href="/xiaokedada/assets/js/44.e552c633.js"><link rel="prefetch" href="/xiaokedada/assets/js/45.347f0a95.js"><link rel="prefetch" href="/xiaokedada/assets/js/46.59bb9a80.js"><link rel="prefetch" href="/xiaokedada/assets/js/47.0a72aee1.js"><link rel="prefetch" href="/xiaokedada/assets/js/48.32c141f4.js"><link rel="prefetch" href="/xiaokedada/assets/js/49.3610d444.js"><link rel="prefetch" href="/xiaokedada/assets/js/50.350e5049.js"><link rel="prefetch" href="/xiaokedada/assets/js/51.d01155cb.js"><link rel="prefetch" href="/xiaokedada/assets/js/52.a5015ced.js"><link rel="prefetch" href="/xiaokedada/assets/js/53.7b73d8b1.js"><link rel="prefetch" href="/xiaokedada/assets/js/54.092ee587.js"><link rel="prefetch" href="/xiaokedada/assets/js/55.9a2f189a.js"><link rel="prefetch" href="/xiaokedada/assets/js/56.27e46b17.js"><link rel="prefetch" href="/xiaokedada/assets/js/57.d080c747.js"><link rel="prefetch" href="/xiaokedada/assets/js/58.2364eb76.js"><link rel="prefetch" href="/xiaokedada/assets/js/59.9deb8139.js"><link rel="prefetch" href="/xiaokedada/assets/js/60.387795af.js"><link rel="prefetch" href="/xiaokedada/assets/js/61.3d0b8582.js"><link rel="prefetch" href="/xiaokedada/assets/js/62.f5702f6b.js"><link rel="prefetch" href="/xiaokedada/assets/js/63.6e8cc274.js"><link rel="prefetch" href="/xiaokedada/assets/js/64.59692959.js"><link rel="prefetch" href="/xiaokedada/assets/js/65.642d2089.js"><link rel="prefetch" href="/xiaokedada/assets/js/66.515778c0.js"><link rel="prefetch" href="/xiaokedada/assets/js/67.09fd142a.js"><link rel="prefetch" href="/xiaokedada/assets/js/68.d2fd2b20.js"><link rel="prefetch" href="/xiaokedada/assets/js/69.54b34dff.js"><link rel="prefetch" href="/xiaokedada/assets/js/70.08cfd9f1.js"><link rel="prefetch" href="/xiaokedada/assets/js/71.8af3cac6.js"><link rel="prefetch" href="/xiaokedada/assets/js/72.8cf1ac97.js"><link rel="prefetch" href="/xiaokedada/assets/js/73.0d2c3de9.js"><link rel="prefetch" href="/xiaokedada/assets/js/74.c5383443.js"><link rel="prefetch" href="/xiaokedada/assets/js/75.b692daea.js"><link rel="prefetch" href="/xiaokedada/assets/js/76.f1760c70.js"><link rel="prefetch" href="/xiaokedada/assets/js/77.024d7794.js"><link rel="prefetch" href="/xiaokedada/assets/js/78.54101d27.js"><link rel="prefetch" href="/xiaokedada/assets/js/79.395e6dea.js"><link rel="prefetch" href="/xiaokedada/assets/js/80.3e659e88.js"><link rel="prefetch" href="/xiaokedada/assets/js/81.31d7c9c5.js"><link rel="prefetch" href="/xiaokedada/assets/js/82.76901e43.js"><link rel="prefetch" href="/xiaokedada/assets/js/83.86b6f686.js"><link rel="prefetch" href="/xiaokedada/assets/js/84.e08c1f31.js"><link rel="prefetch" href="/xiaokedada/assets/js/85.a28700bf.js"><link rel="prefetch" href="/xiaokedada/assets/js/86.57747352.js"><link rel="prefetch" href="/xiaokedada/assets/js/87.6495c6ae.js"><link rel="prefetch" href="/xiaokedada/assets/js/88.fe6c9a90.js"><link rel="prefetch" href="/xiaokedada/assets/js/89.48f45856.js"><link rel="prefetch" href="/xiaokedada/assets/js/90.c2c96eb9.js"><link rel="prefetch" href="/xiaokedada/assets/js/91.466b65d5.js"><link rel="prefetch" href="/xiaokedada/assets/js/92.2c835547.js"><link rel="prefetch" href="/xiaokedada/assets/js/93.d0f32c26.js"><link rel="prefetch" href="/xiaokedada/assets/js/94.6d7ef6f7.js"><link rel="prefetch" href="/xiaokedada/assets/js/95.efa056b8.js"><link rel="prefetch" href="/xiaokedada/assets/js/96.1a9f1737.js"><link rel="prefetch" href="/xiaokedada/assets/js/97.68765c16.js"><link rel="prefetch" href="/xiaokedada/assets/js/98.c65e6193.js"><link rel="prefetch" href="/xiaokedada/assets/js/99.734ab7e3.js"><link rel="prefetch" href="/xiaokedada/assets/js/100.ffb81130.js"><link rel="prefetch" href="/xiaokedada/assets/js/101.52409c86.js"><link rel="prefetch" href="/xiaokedada/assets/js/103.ecdf3ea3.js"><link rel="prefetch" href="/xiaokedada/assets/js/104.d991dc2b.js"><link rel="prefetch" href="/xiaokedada/assets/js/105.6a089ee7.js"><link rel="prefetch" href="/xiaokedada/assets/js/106.826b0deb.js"><link rel="prefetch" href="/xiaokedada/assets/js/107.6306b794.js"><link rel="prefetch" href="/xiaokedada/assets/js/108.dc62e716.js"><link rel="prefetch" href="/xiaokedada/assets/js/109.18b18713.js"><link rel="prefetch" href="/xiaokedada/assets/js/110.b5de4946.js"><link rel="prefetch" href="/xiaokedada/assets/js/111.fea6ceb6.js"><link rel="prefetch" href="/xiaokedada/assets/js/112.c1b52e48.js"><link rel="prefetch" href="/xiaokedada/assets/js/113.660b807b.js"><link rel="prefetch" href="/xiaokedada/assets/js/114.37c0dee4.js"><link rel="prefetch" href="/xiaokedada/assets/js/115.22f7ee1d.js"><link rel="prefetch" href="/xiaokedada/assets/js/116.8b3a33cc.js"><link rel="prefetch" href="/xiaokedada/assets/js/117.8f39d356.js">
    <link rel="stylesheet" href="/xiaokedada/assets/css/118.styles.306d23a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/xiaokedada/" class="home-link router-link-active"><!----><span class="site-name">
      XIAOKEDADA
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link router-link-active">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/xiaokedada/Blog/" class="nav-link">Blog</a></div><div class="nav-item"><a href="/xiaokedada/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/xiaokedada/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/xiaokedada/FirstMeet/" class="nav-link">More</a></div><div class="nav-item"><a href="/xiaokedada/CSS/" class="nav-link router-link-active">CSS</a></div><div class="nav-item"><a href="/xiaokedada/ReadingNote/" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/xiaokedada/Weekly/" class="nav-link">Weekly</a></div><div class="nav-item"><a href="/xiaokedada/GatherAll/" class="nav-link">R &amp; T</a></div><a href="https://github.com/maoxiaoke/xiaokedada" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>层叠样式</span><!----></p><ul class="sidebar-group-items"><li><a href="/xiaokedada/CSS/Flex.html" class="sidebar-link">Flexbox的完全教程 [翻译]</a></li><li><a href="/xiaokedada/CSS/CSS-ProTips.html" class="sidebar-link">CSS 专家提示[翻译]</a></li><li><a href="/xiaokedada/CSS/Layout.html" class="sidebar-link">CSS的布局方式</a></li><li><a href="/xiaokedada/CSS/Center.html" class="sidebar-link">CSS居中的完整教程[翻译]</a></li><li><a href="/xiaokedada/CSS/BFC.html" class="sidebar-link">CSS中的BFC规则</a></li><li><a href="/xiaokedada/CSS/Specialty.html" class="sidebar-link">特指度--确定哪个样式胜出</a></li><li><a href="/xiaokedada/CSS/Two-or-Three-Column.html" class="sidebar-link">两栏和三栏布局详解</a></li><li><a href="/xiaokedada/CSS/Order-CSS-Properties.html" class="sidebar-link">有关 CSS properties 声明顺序的思考</a></li><li><a href="/xiaokedada/CSS/CSS2.2.html" class="active sidebar-link">CSS 2.2 阅读手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_1-about-the-css-2-2-specification" class="sidebar-link">1 About the CSS 2.2 Specification</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_2-introduction-to-css-2-2" class="sidebar-link">2 Introduction to CSS 2.2</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_3-conformance-requirements-and-recommendations" class="sidebar-link">3 Conformance: Requirements and Recommendations</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_6-assigning-property-values-cascading-and-inheritance" class="sidebar-link">6 Assigning property values, Cascading, and Inheritance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#property-值-value-的解析过程？" class="sidebar-link">property 值(value) 的解析过程？</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#层叠顺序-和-特指度" class="sidebar-link">层叠顺序 和 特指度</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_8-box-model" class="sidebar-link">8 Box model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#box-model-的几个盒子属性" class="sidebar-link">Box model 的几个盒子属性</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#盒子的-content-area-的尺寸怎么计算？" class="sidebar-link">盒子的 content area 的尺寸怎么计算？</a></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#盒子的-background-属性" class="sidebar-link">盒子的 background 属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/xiaokedada/CSS/CSS2.2.html#_9-visual-formatting-model" class="sidebar-link">9 Visual formatting model</a></li></ul></li><li><a href="/xiaokedada/CSS/How-To-Write-CSS.html" class="sidebar-link">争取把 CSS 写好</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="css-2-2-阅读手册"><a href="#css-2-2-阅读手册" aria-hidden="true" class="header-anchor">#</a> CSS 2.2 阅读手册</h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>本手册的翻译约定如下：</p><ul><li>“元素” 对应于 &quot;element&quot;，通常指的是 HTML 的 TAG。</li><li>“属性” 对应于 &quot;property&quot;，而非 &quot;attribute&quot;。有些文章会为了区分 &quot;property&quot; 和 &quot;attribute&quot;，称呼前者为 “特性”，后者为 “属性”。对我而言，如果你遇到 “属性”，请替换成 &quot;property&quot;。</li><li>User Agent 通常指的就是 “浏览器”。</li><li>&quot;specificity&quot; 译成“特指度”。</li><li>&quot;visual formatting model&quot; 翻译成“视觉格式模型”。</li></ul></div><h2 id="_1-about-the-css-2-2-specification"><a href="#_1-about-the-css-2-2-specification" aria-hidden="true" class="header-anchor">#</a> 1 About the CSS 2.2 Specification</h2><ol><li>对于一个 CSS 属性应该关注的点</li></ol><ul><li>Property-name：名称</li><li>value：合法的值或者术语</li><li>initial: 初始值</li><li>Applies to：所有的元素被认为拥有所有的 properties, 但有些 property 对特定的元素是没有渲染效果的</li><li>Inherited：继承性，能否被继承</li><li>Percentages: 如果 value 是百分比值，如何被解释。<code>N/A</code> 表示不接受百分比参数</li><li>Media：属性作用的媒体类型</li><li>Computed value：确定如何计算 computed value（6.1节介绍）</li></ul><h2 id="_2-introduction-to-css-2-2"><a href="#_2-introduction-to-css-2-2" aria-hidden="true" class="header-anchor">#</a> 2 Introduction to CSS 2.2</h2><ol start="2"><li>CSS 的设计原则</li></ol><h2 id="_3-conformance-requirements-and-recommendations"><a href="#_3-conformance-requirements-and-recommendations" aria-hidden="true" class="header-anchor">#</a> 3 Conformance: Requirements and Recommendations</h2><p>几个关键概念的区分：</p><h4 id="element-和-replaced-element"><a href="#element-和-replaced-element" aria-hidden="true" class="header-anchor">#</a> Element 和 Replaced element</h4><p><code>Element</code> 是诸如 <code>p</code>、<code>table</code> 和 <code>ol</code> 等的 DOM 元素。</p><p><code>Replaced element</code> 指的是内容(content)超出 <code>CSS formatting model</code> 的某些元素。也就是说，元素的内容不受当前文档样式的影响，内容是可替换的。这很好理解，因为元素的内容来自当前文档的外部。</p><p>有哪些元素是可替换的的呢。这个问题可以换个提法，就是哪些元素的内容是<em>嵌入</em>的呢？我们可以参考 <a href="https://www.w3.org/TR/html5/dom.html#embedded-content-2" target="_blank" rel="noopener noreferrer">HTML5 标准协议<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><blockquote><p>Embedded content is content that imports another resource into the document, or content from another vocabulary that is inserted into the document.</p></blockquote><p>标准还给出了内容是嵌入式的元素。<code>&lt;img&gt;</code>、<code>&lt;canvas&gt;</code>、<code>&lt;audio&gt;</code>、<code>&lt;embed&gt;</code>、<code>&lt;math&gt;</code>、<code>&lt;object&gt;</code>、<code>&lt;picture&gt;</code>、<code>&lt;svg&gt;</code>、<code>&lt;video&gt;</code>。</p><p>比如一张图片、嵌入式的文档和小程序。比如，<code>&lt;img&gt;</code> 元素经常被指定给 <code>src</code> 属性的图片所取代。<strong><code>Replaced element</code> 一般有固有尺寸：固有的宽、高和比例</strong>(不过，User Agent 可能会有其他实现)。</p><blockquote><p>固有尺寸是元素自身定义的宽和高，不受周围的元素影响。</p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>有一点需要注意，我们可以使用 CSS 来控制图片和 iframe 的尺寸。实际上，元素本身是被设置属性的，但<em>内容</em>是不能的。</p></div><p>以下的文章，可供参考：</p><ul><li><a href="http://ahmed.amayem.com/html-replaced-elements-non-replaced-elements-examples/" target="_blank" rel="noopener noreferrer">What are HTML Replaced Elements VS Non-Replaced Elements with Examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Replaced_element" target="_blank" rel="noopener noreferrer">Replaced element<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h4 id="attribute-和-property-在标准中的区分"><a href="#attribute-和-property-在标准中的区分" aria-hidden="true" class="header-anchor">#</a> Attribute 和 Property 在标准中的区分</h4><p>Attribute 是一个和元素有关的<em>键值对</em>。比如，<code>&lt;input&gt;</code> 里可以定义为 <code>button</code> 类型，需要在内部添加 <code>type=&quot;button&quot;</code>。</p><p>CSS 定义的一组有限的参数，就是 Property，用于指导文档的渲染，也由<em>键值对</em>组成。比如，<code>border-color: red</code>。</p><h2 id="_6-assigning-property-values-cascading-and-inheritance"><a href="#_6-assigning-property-values-cascading-and-inheritance" aria-hidden="true" class="header-anchor">#</a> 6 Assigning property values, Cascading, and Inheritance</h2><p>几个问题的了解：</p><h3 id="property-值-value-的解析过程？"><a href="#property-值-value-的解析过程？" aria-hidden="true" class="header-anchor">#</a> property 值(value) 的解析过程？</h3><p>User agent 解析 DOM 时，会为每个元素的每个属性(property)赋值。这个值由下面四个步骤决定(每个属性的值都有这四个步骤)：</p><ul><li>第一步，由规范确定该值(<code>specified value</code>)</li><li>第二步， specified value 解析为一个用于子元素继承的值(<code>computed value</code>)</li><li>第三步，在有必要的时候，computed value 会转换成一个固定的值(<code>used value</code>)</li><li>第四步，最根据所在的环境限制将 used value 转换的一个实际值(<code>actual value</code>)</li></ul><p>之后，我们将解答两个问题。1. 四类值是怎么来的；2. 四类值的作用</p><h4 id="specified-values"><a href="#specified-values" aria-hidden="true" class="header-anchor">#</a> Specified values</h4><p>User agents 依据规则给每个属性所赋的值就是 specified value。规则如下:</p><ul><li>如果是 “层叠”(cascade) 的结果，便是这个值。同时，如果该值是继承过来的, specified values 就是继承来的值(The 'inherit' value)</li><li>否则，如果该属性是可继承的属性，并且该属性依附的元素不是根元素，使用父元素的 computed value。</li><li>否则，使用属性的初始值(initial)</li></ul><blockquote><p>“继承来的值” 区别于 “继承属性”。“继承来的值” 使用关键字 <code>inherit</code> 进行标定。每个属性都有这个关键字，<strong>它将父元素的 computed value 作为自己的 specified value</strong>。这个值也是在“层叠时”进行计算的。</p></blockquote><p>下面这个例子：</p><div class="language-sass extra-class"><pre class="language-sass"><code><span class="token comment">/*</span>
<span class="token selector">&lt;div class=</span><span class="token string">&quot;parent&quot;</span><span class="token selector">&gt;</span>
  <span class="token selector">&lt;div class=</span><span class="token string">&quot;child&quot;</span><span class="token selector">&gt;&lt;/div&gt;</span>
<span class="token selector">&lt;/div&gt;</span>
<span class="token selector">*/</span>
<span class="token selector">.parent</span>
<span class="token property-line">  <span class="token property">width</span><span class="token punctuation">:</span> 400px</span>
<span class="token property-line">  <span class="token property">height</span><span class="token punctuation">:</span> 200px</span>
<span class="token property-line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red</span>
  <span class="token selector">.child</span>
<span class="token property-line">    <span class="token property">width</span><span class="token punctuation">:</span> 200px</span>
<span class="token property-line">    <span class="token property">height</span><span class="token punctuation">:</span> 100px</span>
<span class="token property-line">    <span class="token property">border</span><span class="token punctuation">:</span> inherit</span>
</code></pre></div><p>上面这个例子中，子元素 <code>.child</code> 的 <code>border</code> 的 <code>specified value</code> 就是由父元素 <code>.parent</code> 的 <code>computed value</code> 继承过来的。</p><p>如果 <code>inherit</code> 关键字用于根元素的属性上，则和初始值(<code>initial</code>)保持一致。</p><p>而可被继承属性是另外一种意思，比如 <code>font-size</code>，就是可被继承的属性。</p><h4 id="computed-values"><a href="#computed-values" aria-hidden="true" class="header-anchor">#</a> Computed values</h4><p>在“层叠”阶段，Specified values 会被解析成 Computed values。这两类值都是在 user agent 渲染文档之前(页面布局前)进行计算的。</p><p>这一阶段，</p><ul><li>将可以计算的相对值转换为绝对值。比如，一个元素有 <code>font-size: 12px; margin-top: 2em</code>，就可以转换成 <code>font-size: 12px; margin-top: 24px</code>，这种相对的长度单位转换为绝对的像素，或者相对的 uri 转换为绝对的 uri；但有些值需要在文档渲染过程时才能够计算出来，比如 <code>width</code> 属性的百分比以来页面的布局情况，此时， percentage-specified values 还是会变成 percentage-computed values，值保持一致；有些属性值不需要进行转换，比如 <code>line-height</code>，则直接变成 computed value。</li></ul><p>computed value 阶段的主要用途，其一是 specified value 依据规范得到 computed value 用于后续解析过程；其二是处理特殊关键字；其三是用于<strong>继承</strong>-当有继承存在时，无论是 <code>inherit</code> 和继承属性，父元素的 computed value 就是子元素的 specified value 和 computed value(同时)。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>我认为，解析 <code>inherit</code>、<code>initial</code>、<code>unset</code> 等关键字应该是处于 specified values 阶段而非 computed values 阶段。在 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的描述中，computed values 阶段会 <em>Handling the special values inherit, initial, unset, and revert.</em>  MDN 依据的是 <a href="https://www.w3.org/TR/CSS2/cascade.html#computed-value" target="_blank" rel="noopener noreferrer">CSS 2.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 版本。但实际上该版本似乎并没有对此作出规定。</p></div><h4 id="used-values"><a href="#used-values" aria-hidden="true" class="header-anchor">#</a> Used values</h4><p>Used values 就是有些元素的属性值依赖其他元素渲染出来后才能得到，在这一阶段就会进行处理。</p><h4 id="actual-values"><a href="#actual-values" aria-hidden="true" class="header-anchor">#</a> Actual values</h4><p>一般来说，used values 就是文档渲染时使用的值，但并不是和所有的 User Agent 都能直接应用 used values。比如，有些 User Agent 只能渲染整数像素的宽度，对于诸如 <code>1.2px</code> 这个的数值没办法处理，只能采用近似求得的就是 actual values。</p><blockquote><p><a href="https://www.w3.org/TR/CSS22/cascade.html#value-stages" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><h3 id="层叠顺序-和-特指度"><a href="#层叠顺序-和-特指度" aria-hidden="true" class="header-anchor">#</a> 层叠顺序 和 特指度</h3><p>样式的来源有三个：<code>author</code>、<code>user</code> 和 <code>user agent</code>。</p><ul><li><code>Author</code> - 作者，通俗点，就是开发网页的程序员，他们可以通过外部引入样式表或自己定义样式表。</li><li><code>User</code> - 用户，就是浏览网站的用户。比如，他们可以通过放大或缩小改变字体的大小。</li><li><code>User Agent</code> - 一般来说，是浏览器。浏览器通常会定义元素的一些默认的样式。</li></ul><p>而这三者所定义的样式，则会影响到层叠顺序(Cascading order)。</p><p>CSS 的第一个字母表示的就是 “层叠”。所谓层叠，就是对于一个元素而言，可能会有多个样式表与其对应，或多个来源，可能相互产生冲突。</p><p>为了避免产生冲突，就需要定义层叠顺序，如下：</p><ol><li>查找所有作用于元素或属性的声明</li><li>根据是否有 <code>important</code> 和样式来源进行排序</li></ol><ul><li>User agent 声明的优先级最低</li><li>然后是 User 定义的一般声明</li><li>然后是 Author 定义的一般声明</li><li>然后是 Author 加 <code>important</code> 的声明</li><li>最后 User 加 <code>important</code> 的声明的优先级最高</li></ul><ol start="3"><li>如果有相同的重要性(比如，都是 Author 定义的一般声明。如果一方是 User 定义的一般声明，另一方是 Author 定义的一般声明，则 Author 定义的一般声明优先级高，胜出)，这个时候，使用特指度(Specificity )来进行优先级排序，特指度值大的优先级高；</li><li>最后，按照指定顺序排序。如果有相同的权重(比如来源一致，特指度一致)，则后声明的样式胜出。</li></ol><p>但是，对于程序员而言，大多数情况下都是处理 Author 定义的一般声明，这种情况下判断样式的胜出通常通过特指度(Specificity )。特指度实际上也是一种权重比较法。有以下规则：</p><ul><li>行内样式(就是在元素内使用 <code>style</code> attribute)，a = 1，否则 a = 0</li><li>选择器中 ID attribute 的数量等于 b</li><li>选择器内的其他 attribute (类) 和伪类的数量等于 c</li><li>选择器内元素名和伪元素的数量等于 d</li></ul><p>官方的例子：</p><div class="language-text extra-class"><pre class="language-text"><code> *             {}  /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */
 li            {}  /* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */
 li:first-line {}  /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */
 ul li         {}  /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */
 ul ol+li      {}  /* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */
 h1 + *[rel=up]{}  /* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */
 ul ol li.red  {}  /* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */
 li.red.level  {}  /* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */
 #x34y         {}  /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */
 style=&quot;&quot;          /* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */
</code></pre></div><blockquote><p><a href="https://www.w3.org/TR/CSS22/cascade.html#cascade" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><h2 id="_8-box-model"><a href="#_8-box-model" aria-hidden="true" class="header-anchor">#</a> 8 Box model</h2><blockquote><p>盒子是 CSS 的基础。</p></blockquote><p><code>Document Tree</code> 的为每个元素生成一个盒子，并根据 <code>visual formatting model</code> 进行堆叠。</p><h3 id="box-model-的几个盒子属性"><a href="#box-model-的几个盒子属性" aria-hidden="true" class="header-anchor">#</a> Box model 的几个盒子属性</h3><h4 id="margin-area"><a href="#margin-area" aria-hidden="true" class="header-anchor">#</a> margin area</h4><p>margin area 由 <code>margin</code> 属性定义。该属性对所有元素都有效。<strong>但垂直方向的 margin 对非可替换的行内(non-replaced inline)元素无效</strong>。</p><p><code>margin</code> 的宽度接收以下值：</p><ul><li>固定长度</li><li>百分比：以盒子的 <code>width</code> 作为计算对象。</li><li>auto</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>margin</code>属性是接受<em>负值</em>的。相比较，<code>padding</code> 的宽度为百分比时也是以盒子的 <code>width</code> 为计算对象，但不接受负值。</p></div><h4 id="collapsed-margin"><a href="#collapsed-margin" aria-hidden="true" class="header-anchor">#</a> collapsed margin</h4><p>定义：<strong>两个或多个</strong>毗邻的盒子(可能是兄弟盒，也可能不是)会坍塌成一个 margin。</p><p>关键字解释：</p><p><strong>毗邻</strong> - 毗邻的要求如下(都满足)：</p><ol><li><p>全都是处于文档流(in-flow)的 block-level-box，并参与到相同的 BFC 中。</p></li><li><p>不是 line box，没有 clearance, 没有 padding 或 border 将它们隔开。</p></li><li><p>同属于垂直方向上的临近盒边缘。以下四种类型：</p><ul><li>盒子的 bottom margin 和它之后的第一个 in-flow 兄弟盒的 top margin</li><li>盒子的 top margin 和它的第一个 in-flow 子盒的 top margin</li><li>如果父盒的 <code>height</code> 的 computed value 是 <code>auto</code>，则它最后一个 in-flow 子盒的 bottom margin 和它的 bottom margin</li><li>如果一个盒子没有创建 BFC，<code>min-height</code> 的 computed value 是 <code>zero</code>，<code>height</code> 的 computed value 是 <code>zero</code> 或 <code>auto</code>，并且没有 in-flow 子盒。则这个盒子的 top margin 和 bottom 发生坍塌。</li></ul></li></ol><p>所有根据上面的描述，发生 collapsed margin 的发生在三类情形中。</p><ol><li>兄弟盒</li></ol><p>例子：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sibling<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是 parent 的第一个 in-flow 子盒也是最后一个 in-flow 子盒 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    p
        <span class="token property">margin</span><span class="token punctuation">:</span> 0px
        <span class="token property">padding</span><span class="token punctuation">:</span> 0px
    div
        <span class="token property">display</span><span class="token punctuation">:</span> block
        <span class="token property">width</span><span class="token punctuation">:</span> 80%
        <span class="token property">height</span><span class="token punctuation">:</span>150px
    .sibling
        <span class="token property">background-color</span><span class="token punctuation">:</span> #4e97cd
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px
    .parent
        <span class="token property">background-color</span><span class="token punctuation">:</span> blue
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 30px
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>最后兄弟盒之间的 margin 取 <code>.sibling</code> 和 <code>.parent</code> 中的最大值 <code>30px</code>。</p><ol start="2"><li>父子盒</li></ol><p>父子盒的第一种情况：</p><div class="language-sass extra-class"><pre class="language-sass"><code><span class="token selector">.parent</span>
<span class="token property-line">    <span class="token property">background-color</span><span class="token punctuation">:</span> blue</span>
<span class="token property-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px</span>
<span class="token selector">.child</span>
<span class="token property-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px</span>
<span class="token property-line">    <span class="token property">background-color</span><span class="token punctuation">:</span> yellow</span>
</code></pre></div><p>这种情况下，父盒的 top margin 取 <code>.child</code> 的值 <code>20px</code>。</p><p>父子盒的第一种情况：</p><div class="language-sass extra-class"><pre class="language-sass"><code><span class="token selector">.parent</span>
<span class="token property-line">    <span class="token property">background-color</span><span class="token punctuation">:</span> blue</span>
<span class="token property-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px</span>
<span class="token property-line">    <span class="token property">height</span><span class="token punctuation">:</span> auto</span>
<span class="token selector">.child</span>
<span class="token property-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px</span>
<span class="token property-line">    <span class="token property">background-color</span><span class="token punctuation">:</span> yellow</span>
</code></pre></div><p>这种情况下，父盒的 bottom margin 取 <code>.child</code> 的值 <code>20px</code>。</p><ol start="3"><li>空盒</li></ol><div class="language-sass extra-class"><pre class="language-sass"><code><span class="token selector">.sibling</span>
<span class="token property-line">    <span class="token property">margin-top</span><span class="token punctuation">:</span> 20px</span>
<span class="token property-line">    <span class="token property">height</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">    <span class="token property">background-color</span><span class="token punctuation">:</span> #4e97cd</span>
<span class="token property-line">    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px</span>
</code></pre></div><p>这种情况下，盒子 <code>.sibling</code> 是一个 空盒，有 <code>20px</code> 的 margin。</p><blockquote><p><a href="https://www.w3.org/TR/CSS22/box.html#collapsing-margins" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><h3 id="盒子的-content-area-的尺寸怎么计算？"><a href="#盒子的-content-area-的尺寸怎么计算？" aria-hidden="true" class="header-anchor">#</a> 盒子的 content area 的尺寸怎么计算？</h3><p>待探究。</p><h3 id="盒子的-background-属性"><a href="#盒子的-background-属性" aria-hidden="true" class="header-anchor">#</a> 盒子的 background 属性</h3><h2 id="_9-visual-formatting-model"><a href="#_9-visual-formatting-model" aria-hidden="true" class="header-anchor">#</a> 9 Visual formatting model</h2><p>VFM (Visual Formatting Model) 定义 User Agent 如何处理 文档树。在 VFM 中，一个元素会生成零个或更多个的盒子。这些盒子的布局收到以下因素影响：</p><ul><li>盒子尺寸和类型</li><li>定位方案( normal flow/float/absolute positioning)</li><li>元素之间的关系</li><li>外部信息(比如：视口尺寸，图片的固有尺寸)</li></ul><p>几个概念：</p><h4 id="视口"><a href="#视口" aria-hidden="true" class="header-anchor">#</a> 视口</h4><p>视口(viewport)。简而言之，视口指的是页面渲染的有效区域。当视口尺寸变化时，User Agent 可能会改变文档的布局；当不足以容纳渲染的内容时，User Agent 应该提供滚动方案。</p><h4 id="containing-blocks-包含块"><a href="#containing-blocks-包含块" aria-hidden="true" class="header-anchor">#</a> Containing Blocks - 包含块</h4><p>在 CSS 中，很多的盒子的位置和尺寸要根据另一个盒子进行计算，就叫做元素的 <em>Containing Block</em> (包含块)。一般来说，父盒包含子盒。</p><p>一个元素的 containing block 定义如下：</p><ol><li>根元素所在的盒，称为 <em>初始包含块</em> (initial containing block)。</li><li>对于其他元素，如果元素的 <code>position</code> 属性值是 <code>relative</code> 或 <code>static</code> (也就是 in flow)，元素的包含块就是最近的父/祖先盒的 <code>content area</code>。其中，父/祖先盒是一个 Block Container Box (见下面的块容器盒) 或会生成 格式化内容 (BFC 或 IFC ，见下面的内容)。</li><li>如果 <code>position</code> 属性值是 <code>fixed</code>。包含块就是视口所在的区域。</li><li>如果 <code>position</code> 属性值是 <code>absolute</code>，则元素的包含块由最近的 <code>position</code> 非 <code>static</code> 属性值的父/祖先元素决定。如果其父/祖先元素是行内元素，则包含块就是生成元素的第一个和最后一个行内盒的 <code>padding area</code>；其他情况下，包含块就是其父/祖先的 <code>padding area</code>；如果没有这样的父/祖先元素，包含块就是 <em>初始包含块</em>。</li></ol><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Container<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is text in the first paragraph...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is Text <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>in the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>Second<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> paragraph<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上面的例子为例：</p><ul><li><code>&lt;p&gt;</code> 的 Containing Block 由 <code>&lt;div&gt;</code> 确定。</li><li><code>&lt;em&gt;</code> 和 <code>&lt;strong&gt;</code> 的 Container Block 都由第二个 <code>&lt;p&gt;</code> 确定。</li></ul><p>如果为 <code>div</code> 和 <code>em</code> 都添加 <code>style=&quot;position: absolute&quot;</code>：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Container<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is text in the first paragraph...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is Text <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span> absolute</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>in the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>Second<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> paragraph<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>那么，根据上面第四条规则。<code>div</code> 的 Containing block 就不再由 <code>&lt;body&gt;</code> 而是 初始包含块 确定。<code>em</code> 的 Containing block 由 <code>div</code> 而不是原来的 <code>p</code>。</p><p>重点的问题是：<code>&lt;strong&gt;</code> 的 Containing block 还是由 <code>&lt;p&gt;</code> 确定吗。我们来看第二条规则。问题就变成 <code>&lt;em&gt;</code> 是不是一个 Block Container Box 了。Block Container Box 中有一条是 <em>如果一个非置换元素的 <code>display</code> 属性值是 <code>block</code>、<code>list-item</code> 和 <code>table</code> 所生成的盒属于 Block Container Box</em>。所以起初 <code>&lt;em&gt;</code> 的 <code>display: inline</code> 不是一个 Block Container Box。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/container01.jpg" alt></p><p>之后由于 <code>&lt;em&gt;</code> 的 <code>position</code> 属性值变成了 <code>absolute</code>。根据 <code>position</code>、<code>display</code> 和 <code>float</code> 之间的相互影响(见后面的内容)，<code>&lt;em&gt;</code> 的 <code>display</code> 属性变成了 <code>display: block</code>，从而变成 Block Container Box。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/container02.jpg" alt></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Containing block 影响到很多内容，比如很多元素属性的百分值都是由其元素的 Containing block 确定。Flex 盒也会涉及到 Containing block 的概念。</p></div><p>接下来，是重要的 CSS2.2 中盒的类型。盒子的类型，会影响到 VFM。CSS2.2 中 <code>display</code> 属性定义盒子类型。</p><h4 id="块级盒、块容器盒和块盒"><a href="#块级盒、块容器盒和块盒" aria-hidden="true" class="header-anchor">#</a> 块级盒、块容器盒和块盒</h4><p>块级元素(Block-level elements)、块盒(Block boxes) 和 块容器盒(Block container box)是三个不同的概念。</p><p><em>Block-level Box</em> - <code>display</code> 属性值为 <code>block</code>、<code>list-item</code> 和 <code>table</code> 的元素就是 块级元素。这些属性会为内容生成一个 block-level principal box。**块级元素形成的块级盒(Block-level boxes)参与 Block Formatting Context (BFC, 块级格式上下文)</p><p><em>Block Container Box</em> - 块容器盒要么<strong>只</strong>包含块级盒(构成 BFC)，要么<strong>只</strong>包含 inline-level box(构成 IFC)。</p><p>如果一个 Block-level Box 不是 table box 或可置换元素形成的盒，那么也是一个 Block Container Box。</p><p>如果一个非置换元素的 <code>display</code> 属性值是 <code>block</code>、<code>list-item</code> 和 <code>table</code> 所生成的盒属于 Block Container Box, 同时也是 Block-level Box。</p><p>有些盒子属于 Block Container Box，但不属于Block-level Box，比如 table cell 和 inline-box。</p><p><em>Block box</em> - 既是 Block Container Box 也是 Block-level Box 的称为 Block boxes。</p><p>Block Container Box 和 Block-level Box 在数学上其实是一个相交的概念。类似于下面这个图：</p><p><img src="http://p3puylt4n.bkt.clouddn.com/block-container.png" alt></p><blockquote><p><a href="https://stackoverflow.com/questions/30883857/css-spec-block-level-box-block-container-box-and-block-box" target="_blank" rel="noopener noreferrer">图片出处<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>第一点，Block Container Box 的用处在哪里。Block-level Box 会参与 BFC，但 Block Container Box 有什么作用呢？我们看定义：<strong>块容器盒要么只包含块级盒(构成 BFC)，要么只包含 inline-level box(构成 IFC)</strong>。所以呢， Block Container Box 是参与 <em>格式化内容</em>(formatting content)的。在 Block Container Box 内，要么是 BFC，要么是 IFC。</p><p>第二点，table box 不是 Block Container Box 原因原因在于 table box 参与的是 table 布局，而非 block 布局。</p><p>第三点，置换元素由于不包含其他的内容，所以也不是 Block Container Box。</p><blockquote><p><a href="https://stackoverflow.com/questions/30883857/css-spec-block-level-box-block-container-box-and-block-box" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>由上面的第一点，我们就能讨论到 Anonymous Block Box(匿名块盒) 的概念了。</p><p><strong>Anonymous Block Box</strong></p><p>很显然，Anonymous Block Box 也属于 Block-level Box。</p><p>官方的例子：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  Some Text
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>More Text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上面的 <code>&lt;div&gt;</code> 会生成一个 Block Container Box (包含 inline-content 和 block-content)，由于 Block Container Box 要么只包含 Block-level Box，要么只包含 Inline-level Box，而由于 <code>&lt;p&gt;</code> 是 Block-level Box，所以强制 Block Container Box 内只包含 Block-level Box。从而形成了一个 “匿名块盒”。</p><p><img src="http://p3puylt4n.bkt.clouddn.com/anon-block.png" alt></p><p>还有一种生成 Anonymous Block Box 的方式是 <em>一个 inline box(下面会讲到 inline box 的概念) 包含一个处于文档流中的 block-level box</em>。下面这个例子：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Anonymous Block boxes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
        <span class="token selector">p</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>P</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    This is anonymous text before the SPAN.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SPAN</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>This is the content of SPAN.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SPAN</span><span class="token punctuation">&gt;</span></span>
    This is anonymous text after the SPAN.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>P</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>添加 <code>display: inline</code> 使得 <code>&lt;p&gt;</code> 变成一个 inline box，添加 <code>display: block</code> 使得 <code>&lt;span&gt;</code> 变成一个 block-level box。得到的结果如下图：</p><p><img src="http://p3puylt4n.bkt.clouddn.com/anonymous-block-box.jpg" alt></p><p>block-level box 将 inline box 分成两个 Anonymous Block Box(即便有一边是空的，也是如此)。结果就是，在 <code>&lt;p&gt;</code> 内部包含一个 Anonymous Block Box，接着是 <code>&lt;span&gt;</code> 确定的 Anonymous Block Box，最后是另一个 Anonymous Block Box。</p><p>应用于 Anonymous Block Box 的可继承属性，其值继承自其闭合的非匿名盒。比如，Anonymous Block Box 的颜色继承元素 <code>&lt;p&gt;</code> 的 <code>color</code> 属性值。</p><p>另一点需要注意的是，有 Anonymous Block Box 的元素的属性值仍然只适用于该元素的框和内容。所以，上例中为 <code>&lt;p&gt;</code> 添加 <code>border: 1px solid black</code> 会产生上图的结果：在 Anonymous Block Box 的周围画上线条。</p><h4 id="inline-level-box-和-inline-box"><a href="#inline-level-box-和-inline-box" aria-hidden="true" class="header-anchor">#</a> inline-level box 和 inline-box</h4><p>inline-leve box 和 inline-box 就没有这么复杂了。</p><ul><li>inline-level 元素是不会为内容创建一个 块 的元素，内容会在一行显示。<code>display</code> 的属性值为 <code>inline</code>、<code>inline-table</code> 和 <code>inline-block</code> 的元素就是 inline-level 元素。**inline-level 元素形成的inline-block boxes 参与 Inline Formatting Context (IFC, 块级格式上下文)</li><li>当一个 非置换的元素的 <code>display</code> 属性值为 <code>inline</code> 时，就是一个 inline-box。</li></ul><p><strong>Anonymous inline boxes</strong></p><p>同理，CSS2.2 也有一个 Anonymous inline box 的概念。</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Some <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>emphasized<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span> text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>&lt;em&gt;</code> 是一个行内元素，包含 'emphasized' 的内容就是一个 inline box。同时也会为 'Some ' 和 ' text' 生成两个 anonymous inline box。其他特点和 Anonymous Block Box 有相似的地方。</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/maoxiaoke/xiaokedada/edit/master/CSS/CSS2.2.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">1/3/2019, 5:21:25 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/xiaokedada/CSS/Order-CSS-Properties.html" class="prev">
          有关 CSS properties 声明顺序的思考
        </a></span><span class="next"><a href="/xiaokedada/CSS/How-To-Write-CSS.html">
          争取把 CSS 写好
        </a> →
      </span></p></div></div></div></div>
    <script src="/xiaokedada/assets/js/102.2b0d4b0d.js" defer></script><script src="/xiaokedada/assets/js/app.51d0a681.js" defer></script>
  </body>
</html>
